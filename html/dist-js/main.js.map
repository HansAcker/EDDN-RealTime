{
  "version": 3,
  "sources": ["../js/config.js", "../data/GalacticRegions.json", "../js/ed/RegionMap.js", "../js/eddn/EDDNEvent.js", "../js/eddn/EDDNClient.js", "../js/eddn/MessageRouter.js", "../js/ui/infobox.js", "../js/board/DashboardModule.js", "../js/board/modules/ApproachModule.js", "../js/board/modules/CodexEntryModule.js", "../js/board/modules/EventLogModule.js", "../js/ui/statsbox.js", "../js/board/modules/EventStatsModule.js", "../js/board/modules/FSDJumpModule.js", "../js/board/modules/GameStatsModule.js", "../js/board/modules/LocationModule.js", "../js/board/modules/NavRouteModule.js", "../js/board/modules/NewBodiesModule.js", "../js/board/modules/NewStarsModule.js", "../js/board/modules/SoftwareStatsModule.js", "../js/board/modules/ScanModule.js", "../js/board/modules/UpdatesModule.js", "../js/board/modules/VisitsModule.js", "../js/board/Dashboard.js", "../js/ws/ReconnectingWebSocket.js", "../js/ui/activity_icon.js", "../js/main.js"],
  "sourcesContent": ["/**\n * @module config\n * @description Application-wide configuration constants and locale-aware formatters.\n */\n\n/** @type {string} Default locale from browser settings. */\nconst language = navigator.language ?? \"en\";\n\n/**\n * Global configuration object for the EDDN RealTime dashboard.\n *\n * @type {Readonly<Object>}\n * @property {string} websocket_url - WebSocket endpoint for the EDDN relay.\n * @property {number} idleTimeout - Milliseconds before the connection status changes to \"idle\".\n * @property {number} resetTimeout - Milliseconds before the watchdog resets the WebSocket connection.\n * @property {number} oldAge - Millisecond threshold for marking messages as old.\n * @property {number} newAge - Millisecond threshold for marking messages as new (negative = future).\n * @property {string} templateLocale - Locale code used to load HTML template files.\n * @property {string} numberLocale - Locale passed to {@link Intl.NumberFormat}.\n * @property {string} timeLocale - Locale passed to {@link Intl.RelativeTimeFormat}.\n * @property {Object} timeOptions - Options passed to {@link Intl.RelativeTimeFormat}.\n * @property {Intl.NumberFormat} _numberFormat - Shared number formatter instance.\n * @property {Intl.RelativeTimeFormat} _relTimeFormat - Shared relative-time formatter instance.\n * @property {Function} [globalEventFilter] - Optional predicate applied to every incoming EDDN event.\n */\nexport const Config = {\n\twebsocket_url: \"wss://ws.eddn-realtime.space/eddn\",\n\n\t// set status to \"idle\" after idleTimeout ms without valid messages\n\tidleTimeout: 2300,\n\n\t// reset websocket connection after resetTimeout ms without valid messages\n\tresetTimeout: 300 * 1000,\n\n\t// message age thresholds for old/new stats\n\toldAge: 3600 * 1000,\n\tnewAge: 180 * -1000,\n\n\t// load templates from template_XX.html\n\t// TODO: define and match against supportedLocales?\n\ttemplateLocale: \"en\",\n//\ttemplateLocale: language.split(\"-\")[0].toLowerCase(),\n\n\t// override options for Intl.NumberFormat\n\tnumberLocale: language,\n//\tnumberOptions: { notation: \"compact\" },\n\n\t// override options for Intl.RelativeTimeFormat\n\ttimeLocale: language,\n\ttimeOptions: { style: \"narrow\" },\n\n\t// filter events in EDDClient\n/*\n\tglobalEventFilter: (event) => (\n//\t\t(event.age < 0) || (event.isMulticrew) ||\n\t\t(event.StarSystem.startsWith(\"HIP \")) ||\n\t\t(event.message?.Route?.some((wp) => wp?.StarSystem?.startsWith(\"HIP \"))) ||\n\t\t(event.Region.id && event.Region.id !== 18) ||\n//\t\t(event.StarPos && [\"Perseus Arm\", \"The Abyss\", \"Elysian Shore\"].includes(event.Region.name)) ||\n//\t\t(true)\n\t\t(false)\n\t),\n*/\n};\n\n// initialize static formatters\nConfig._numberFormat = new Intl.NumberFormat(Config.numberLocale, Config.numberOptions);\nConfig._relTimeFormat = new Intl.RelativeTimeFormat(Config.timeLocale, Config.timeOptions);\n\n// nothing more to add\nObject.freeze(Config);\n\n\nexport default Config;\n", "[\n\tnull,\n\t\"Galactic Centre\",\n\t\"Empyrean Straits\",\n\t\"Ryker's Hope\",\n\t\"Odin's Hold\",\n\t\"Norma Arm\",\n\t\"Arcadian Stream\",\n\t\"Izanami\",\n\t\"Inner Orion-Perseus Conflux\",\n\t\"Inner Scutum-Centaurus Arm\",\n\t\"Norma Expanse\",\n\t\"Trojan Belt\",\n\t\"The Veils\",\n\t\"Newton's Vault\",\n\t\"The Conduit\",\n\t\"Outer Orion-Perseus Conflux\",\n\t\"Orion-Cygnus Arm\",\n\t\"Temple\",\n\t\"Inner Orion Spur\",\n\t\"Hawking's Gap\",\n\t\"Dryman's Point\",\n\t\"Sagittarius-Carina Arm\",\n\t\"Mare Somnia\",\n\t\"Acheron\",\n\t\"Formorian Frontier\",\n\t\"Hieronymus Delta\",\n\t\"Outer Scutum-Centaurus Arm\",\n\t\"Outer Arm\",\n\t\"Aquila's Halo\",\n\t\"Errant Marches\",\n\t\"Perseus Arm\",\n\t\"Formidine Rift\",\n\t\"Vulcan Gate\",\n\t\"Elysian Shore\",\n\t\"Sanguineous Rim\",\n\t\"Outer Orion Spur\",\n\t\"Achilles's Altar\",\n\t\"Xibalba\",\n\t\"Lyra's Song\",\n\t\"Tenebrae\",\n\t\"The Abyss\",\n\t\"Kepler's Crest\",\n\t\"The Void\"\n]\n", "/**\n * @module RegionMap\n * @description Provides galactic region lookups for Elite Dangerous star\n * positions. Loads a binary run-length-encoded region map on module\n * initialisation and exposes static helpers to resolve coordinates or\n * System ID64 values to named galactic regions.\n */\n\nimport GalacticRegions from \"#data/GalacticRegions.json\" with { type: \"json\" };\n\n\n// lower-left corner coordinates of region map in ly, relative to Sol\nconst X0 = -49985;\nconst Y0 = -40985;\nconst Z0 = -24105;\n\n// region map scale\nconst MAP_SIZE = 2048;\nconst MAP_SCALE = 83 / 4096; // ly to index\n\n// region lookup tables\nlet rowIndex; // z-axis: per-row index into rleData (MAP_SIZE+1 entries)\nlet rleData;  // x-axis: variable-length runs of tuples (length, regionID)\n\nlet isReady = false; // set to true after data load\n\n\n// fetch arraybuffer data on module init\n// binary data created from RegionMapData.json: https://github.com/klightspeed/EliteDangerousRegionMap\n// Layout: [RowIndex (Uint32)...] [RLE Data (Uint16)...]\nconst readyPromise = (async function() {\n\ttry {\n\t\tconst MAP_URL = \"./data/RegionMapData.bin\";\n\n\t\tconsole.debug(\"RegionMap: loading data...\");\n\t\tconst response = await fetch(MAP_URL);\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(`HTTP ${response.status} ${response.statusText}`);\n\t\t}\n\n\t\tconst buffer = await response.arrayBuffer();\n\n\t\tconst offsetCount = MAP_SIZE + 1;\n\t\tconst offsetByteSize = offsetCount * 4;\n\n\t\t// hypothetically, someone could browse the site on an IBM Z mainframe...\n\t\tconst isLittleEndian = new Uint8Array(new Uint32Array([0x12345678]).buffer)[0] === 0x78;\n\t\tif (!isLittleEndian) {\n\t\t\tconsole.debug(\"RegionMap: converting byte-order\");\n\t\t\tconst view = new DataView(buffer);\n\n\t\t\t// Uint32 index section\n\t\t\tfor (let i = 0; i < offsetByteSize; i += 4) {\n\t\t\t\tview.setUint32(i, view.getUint32(i, true));\n\t\t\t}\n\n\t\t\t// Uint16 data section\n\t\t\tfor (let i = offsetByteSize; i < buffer.byteLength; i += 2) {\n\t\t\t\tview.setUint16(i, view.getUint16(i, true));\n\t\t\t}\n\t\t}\n\n\t\t// map data view onto byte buffer\n\t\trowIndex = new Uint32Array(buffer, 0, offsetCount);\n\t\trleData = new Uint16Array(buffer, offsetByteSize);\n\n\t\t// last index points to end of rleData\n\t\tif (rleData.length !== rowIndex[MAP_SIZE]) {\n\t\t\tthrow new Error(`Data length mismatch: Got ${rleData.length}, expected ${rowIndex[MAP_SIZE]}`);\n\t\t}\n\n\t\tisReady = true;\n\t\tconsole.debug(`RegionMap: load done - ${MAP_SIZE} rows, ${rleData.length / 2} segments`);\n\t} catch (err) {\n\t\tconsole.error(\"RegionMap: initialization failed:\", err);\n\t}\n})();\n\n\n/**\n * Extracts a bit field from a BigInt value.\n *\n * @param {bigint} field - The source value.\n * @param {bigint} bits - Number of bits to extract.\n * @param {bigint} [shift=0n] - Bit offset to shift before masking.\n * @returns {bigint} The extracted bit field.\n */\nconst bitMask = (field, bits, shift = 0n) => (field >> shift) & (~(~0n << bits));\n\n\n/**\n * Static utility class for resolving galactic coordinates and System ID64\n * values to Elite Dangerous galactic regions using a pre-loaded binary\n * region map.\n */\nexport class RegionMap {\n\t/**\n\t * Promise that resolves when the binary region-map data has finished loading.\n\t *\n\t * @type {Promise<void>}\n\t */\n\tstatic get ready() { return readyPromise; } // `await RegionMap.ready;`\n\n\t/**\n\t * Whether the region map data has been loaded and is ready for lookups.\n\t *\n\t * @type {boolean}\n\t */\n\tstatic get isReady() { return isReady; }\n\n\t/** @type {number} X-axis origin of the region map in light-years relative to Sol. */\n\tstatic get X0() { return X0; }\n\t/** @type {number} Y-axis origin of the region map in light-years relative to Sol. */\n\tstatic get Y0() { return Y0; }\n\t/** @type {number} Z-axis origin of the region map in light-years relative to Sol. */\n\tstatic get Z0() { return Z0; }\n\n\n\t/**\n\t * Looks up the galactic region for the given coordinates.\n\t *\n\t * @param {number} x - X coordinate in light-years relative to Sol.\n\t * @param {number} _y - Y coordinate (unused in the 2-D region map).\n\t * @param {number} z - Z coordinate in light-years relative to Sol.\n\t * @returns {{id: number, name: string|null}} Region object, or `{id: 0, name: null}` if not found.\n\t */\n\t// find region for galactic coordinates\n\tstatic findRegion(x, _y, z) {\n\t\tif (!isReady || x === undefined || z === undefined) {\n\t\t\treturn { id: 0, name: null };\n\t\t}\n\n\t\t// z |_\n\t\t//    x\n\n\t\t// map x/z coordinates to lookup index\n\t\tconst px = Math.floor((x - X0) * MAP_SCALE);\n\t\tconst pz = Math.floor((z - Z0) * MAP_SCALE);\n\n\t\tif (px < 0 || px >= MAP_SIZE || pz < 0 || pz >= MAP_SIZE) {\n\t\t\treturn { id: 0, name: null };\n\t\t}\n\n\t\t// fetch rleData index for this and the next z-row\n\t\tconst start = rowIndex[pz];\n\t\tconst end = rowIndex[pz + 1] - 1; // rows should have even length, ensure that [i+1] is always in range\n\n\t\t// array data is [Length, ID, Length, ID...]\n\t\tlet remainingX = px;\n\t\tfor (let i = start; i < end; i += 2) {\n\n\t\t\t// find the length/region tuple that contains px\n\t\t\tconst runLength = rleData[i];\n\t\t\tif (remainingX < runLength) {\n\t\t\t\tconst regionId = rleData[i + 1];\n\t\t\t\treturn { id: regionId, name: GalacticRegions[regionId] };\n\t\t\t}\n\t\n\t\t\t// skip to next segment\n\t\t\tremainingX -= runLength;\n\t\t}\n\n\t\t// coordinates not found in rleData\n\t\treturn { id: 0, name: null };\n\t}\n\n\n\t/**\n\t * Finds the galactic region for a given System ID64 by first decoding it\n\t * into boxel coordinates.\n\t *\n\t * @param {string|bigint} id64 - The 64-bit system identifier.\n\t * @returns {{id: number, name: string|null}} Region object.\n\t */\n\t// id64 should be String or BigInt\n\tstatic findRegionForId64(id64) {\n\t\tconst { BoxelPos } = this.decodeId64(id64);\n\t\treturn this.findRegion(...BoxelPos);\n\t}\n\n\n\t/**\n\t * Converts sector and boxel coordinates to galactic coordinates in\n\t * light-years relative to Sol.\n\t *\n\t * @param {number} xs - X sector coordinate.\n\t * @param {number} ys - Y sector coordinate.\n\t * @param {number} zs - Z sector coordinate.\n\t * @param {number} [massClass=0] - Mass class (0\u20137, corresponding to A\u2013H).\n\t * @param {number} [xb=0] - X boxel coordinate.\n\t * @param {number} [yb=0] - Y boxel coordinate.\n\t * @param {number} [zb=0] - Z boxel coordinate.\n\t * @returns {{x: number, y: number, z: number}} Galactic coordinates.\n\t */\n\tstatic sectorsToCoords(xs, ys, zs, massClass = 0, xb = 0, yb = 0, zb = 0) {\n\t\t// 1280ly per sector, 10ly (A) to 1280ly (H) per boxel\n\t\t// TODO: return center coords instead of corner\n\t\tconst x = ((xs << 7) + (xb << massClass)) * 10 + X0;\n\t\tconst y = ((ys << 7) + (yb << massClass)) * 10 + Y0;\n\t\tconst z = ((zs << 7) + (zb << massClass)) * 10 + Z0;\n\n\t\treturn { x, y, z };\n\t}\n\n\n\t/*\n\tID64\n\thttp://disc.thargoid.space/ID64\n\n\tThis is an ID format used by the game to identify systems and stellar bodies.\n\tThe ID is represented as a 64-bit integer.\n\t\n\tThe ID is effectively a structure, with different parts of the bitfield\n\trepresenting different aspects of the system's features.\n\n\tThese parts are:\n\n\t\tMass code (3 bits) - the mass code of the system, with a = 0 through to h = 7\n\t\tZ boxel (0-7 bits) - the Z boxel (within-sector) coordinate of the system\n\t\tZ sector (7 bits) - the Z sector coordinate of the system\n\t\tY boxel (0-7 bits) - the Y boxel (within-sector) coordinate of the system\n\t\tY sector (6 bits) - the Y sector coordinate of the system\n\t\tX boxel (0-7 bits) - the X boxel (within-sector) coordinate of the system\n\t\tX sector (7 bits) - the X sector coordinate of the system\n\t\tN2 (11-32 bits) - the N2 number (within-boxel identifier) of the system\n\t\tBody ID (9 bits) - the ID of the body within the system; for systems this is always 0 (representing the arrival star)\n\n\tNote that the X/Y/Z boxel coordinates and the N2 number have variable sizes;\n\tthis is because the amount of space taken by these pieces of data is different\n\tdepending on the mass code.\n\t*/\n\n\t/**\n\t * Decodes a 64-bit system identifier into its component parts including\n\t * sector/boxel coordinates, mass class, body ID, and galactic position.\n\t *\n\t * @param {string|bigint} id64 - The 64-bit system identifier.\n\t * @returns {{SystemAddress: bigint, BoxelPos: number[], BodyId: number, massClass: number, xs: number, ys: number, zs: number, xb: number, yb: number, zb: number, n2: number}}\n\t */\n\t// id64 should be String or BigInt. Number type could garble the critical lower bits\n\tstatic decodeId64(id64) {\n\t\tconst _id64 = BigInt(id64);\n\n\t\tconst SystemAddress = bitMask(_id64, 55n);\n\t\tconst BodyId = Number(_id64 >> 55n);\n\n\t\tconst massClass = Number(bitMask(_id64, 3n));\n\t\tconst boxelBits = BigInt(7 - massClass);\n\t\tlet shift = 3n;\n\n\t\tconst zb = Number(bitMask(_id64, boxelBits, shift));\n\t\tshift += boxelBits;\n\n\t\tconst zs = Number(bitMask(_id64, 7n, shift));\n\t\tshift += 7n;\n\n\t\tconst yb = Number(bitMask(_id64, boxelBits, shift));\n\t\tshift += boxelBits;\n\n\t\tconst ys = Number(bitMask(_id64, 6n, shift));\n\t\tshift += 6n;\n\n\t\tconst xb = Number(bitMask(_id64, boxelBits, shift));\n\t\tshift += boxelBits;\n\n\t\tconst xs = Number(bitMask(_id64, 7n, shift));\n\t\tshift += 7n;\n\n\t\tconst n2 = Number(bitMask(_id64, 32n-(boxelBits*3n), shift));\n\n\t\tconst { x, y, z } = this.sectorsToCoords(xs, ys, zs, massClass, xb, yb, zb);\n\n\t\t// TODO: decide on a return format\n\t\treturn { SystemAddress, BoxelPos: [x, y, z], BodyId, massClass, xs, ys, zs, xb, yb, zb, n2 };\n\t\t//return { SystemAddress, BodyId, BoxelPos: [x, y, z], Sector: [xs, ys, zs], Boxel: [xb, yb, zb], massClass, n2 };\n\t}\n\n\n\t/*\n\thttps://www.reddit.com/r/EliteDangerous/comments/hvuwb6/galmap_starnaming_from_id64/\n\thttps://docs.google.com/spreadsheets/d/1hJVYIKc2EKjA119qQNCyMOR0PC5xreSjB85zNnkzKTA\n\t*/\n\n\t/**\n\t * Generates the procedural suffix of a system name from its boxel\n\t * coordinates and sequence number.\n\t *\n\t * @param {number} massClass - Mass class (0\u20137).\n\t * @param {number} xb - X boxel coordinate.\n\t * @param {number} yb - Y boxel coordinate.\n\t * @param {number} zb - Z boxel coordinate.\n\t * @param {number} n2 - Within-boxel sequence number.\n\t * @returns {string} The procedural system-name suffix (e.g. `\"AB-C a1-23\"`).\n\t */\n\tstatic procSystemName(massClass, xb, yb, zb, n2) {\n\t\tlet id = xb | (yb << 7) | (zb << 14);\n\n\t\tconst c1 = String.fromCharCode((id % 26) + 65);\n\t\tid = ~~(id / 26);\n\n\t\tconst c2 = String.fromCharCode((id % 26) + 65);\n\t\tid = ~~(id / 26);\n\n\t\tconst c3 = String.fromCharCode((id % 26) + 65);\n\t\tid = ~~(id / 26);\n\n\t\treturn `${c1}${c2}-${c3} ${String.fromCharCode(massClass + 97)}${id ? `${id}-${n2}` : n2}`;\n\t}\n}\n", "/**\n * @module EDDNEvent\n * @description Standardized event wrapper for EDDN messages. Extends the native\n * {@link Event} class with lazily computed properties for schema type, game metadata,\n * star system coordinates, and galactic region lookup via {@link RegionMap}.\n */\n\nimport { RegionMap } from \"#ed/RegionMap.js\";\n\n/**\n * A standardized event wrapper for all EDDN messages. Extends the native\n * {@link Event} class with lazily computed properties for schema type, game\n * metadata, star system coordinates, and galactic region lookup.\n *\n * @extends Event\n */\nexport class EDDNEvent extends Event {\n\t$schemaRef;\n\theader;\n\tmessage;\n\tdata; // event data { $schemaRef, header, message } for easier reference\n\n\t#receiveTimestamp; // timestamp of event creation (local clock)\n\n\t#age = 0; // difference between gatewayTimestamp (gateway clock) and timestamp (sender clock), set by get age()\n\t#gotAge = false;\n\n\t#eventType; // derived from schema/message.event. set by get eventType()\n\t#eventName; // message.event if present, otherwise eventType, set by get eventName()\n\t#gameType; // Odyssey, Horizons. set by get gameType()\n\n\t#isTaxi;\n\t#isMulticrew;\n\n\t#starSystem; // derived from message.StarSystem, .systemName, .SytemName, .System or first hop of .Route, defaults to \"\", set by get StarSystem()\n\n\t#starPos; // derived from message.StarPos or first .Route hop, defaults to undefined, set by get StarPos()\n\t#gotStarPos = false;\n\n\t#region; // RegionMap.findRegion(...#starPos), empty {} if StarPos is undefined, set by get Region()\n\n\n\t/**\n\t * @param {string} type - The event type (\"eddn:message\")\n\t * @param {Object} data - The structured payload\n\t * @param {string} data.$schemaRef - The original schema URL\n\t * @param {Object} data.header - The EDDN header (uploaderID, softwareName, etc.)\n\t * @param {Object} data.message - The actual game data\n\t */\n\tconstructor(type, data) {\n\t\tsuper(type);\n\n\t\t({ $schemaRef: this.$schemaRef, header: this.header, message: this.message } = this.data = data);\n\n\t\t// store a number here, make it a Date object on request\n\t\tthis.#receiveTimestamp = Date.now();\n\t}\n\n\n\t// TODO: make it return the number instead of Date? nothing uses this, yet\n\t/**\n\t * Returns the timestamp at which this event was received (local clock).\n\t *\n\t * @returns {Date}\n\t */\n\tget receiveTimestamp() {\n\t\treturn new Date(this.#receiveTimestamp);\n\t}\n\n\t/**\n\t * Returns the age of the message in milliseconds (gateway timestamp minus\n\t * sender timestamp). Positive values indicate the message was sent in the\n\t * past; negative values indicate clock skew or future timestamps.\n\t *\n\t * @returns {number}\n\t */\n\tget age() {\n\t\treturn this.#gotAge ? this.#age :\n\t\t\t(this.#gotAge = true, this.#age = (Date.parse(this.header?.gatewayTimestamp) - Date.parse(this.message?.timestamp)));\n\t}\n\n\t/**\n\t * Returns the normalised event type derived from the EDDN schema URL and,\n\t * for journal schemas, the `message.event` field (e.g. `\"journal:fsdjump\"`).\n\t *\n\t * @returns {string}\n\t */\n\tget eventType() {\n\t\treturn this.#eventType ??= EDDNEvent.getEventType(this.data);\n\t}\n\n\t/**\n\t * Returns the game event name from `message.event`, falling back to\n\t * {@link EDDNEvent#eventType} if the property is absent.\n\t *\n\t * @returns {string}\n\t */\n\tget eventName() {\n\t\treturn this.#eventName ??= (this.message?.event ?? this.eventType);\n\t}\n\n\t/**\n\t * Returns the game type string (e.g. `\"Odyssey\"`, `\"Horizons\"`, `\"Base\"`,\n\t * `\"Legacy\"`, or `\"Unknown\"`).\n\t *\n\t * @returns {string}\n\t */\n\tget gameType() {\n\t\treturn this.#gameType ??= EDDNEvent.getGameType(this.data);\n\t}\n\n\t/**\n\t * Whether the commander is currently in a taxi (Apex Interstellar shuttle).\n\t *\n\t * @returns {boolean}\n\t */\n\tget isTaxi() {\n\t\treturn this.#isTaxi ??= !!this.message?.Taxi;\n\t}\n\n\t/**\n\t * Whether the commander is in a multicrew session.\n\t *\n\t * @returns {boolean}\n\t */\n\tget isMulticrew() {\n\t\treturn this.#isMulticrew ??= !!this.message?.Multicrew;\n\t}\n\n\t/**\n\t * Returns the star system name derived from various message properties,\n\t * or an empty string if none is available.\n\t *\n\t * @returns {string}\n\t */\n\tget StarSystem() {\n\t\treturn this.#starSystem ??= (this.message?.StarSystem ?? this.message?.systemName ??\n\t\t\tthis.message?.SystemName ?? this.message?.System ?? this.message?.Route?.[0]?.StarSystem ?? \"\");\n\t}\n\n\t/**\n\t * Returns the star position as a `[x, y, z]` coordinate array in\n\t * light-years relative to Sol, or `undefined` if unavailable.\n\t *\n\t * @returns {number[]|undefined}\n\t */\n\tget StarPos() {\n\t\treturn this.#gotStarPos ? this.#starPos :\n\t\t\t(this.#gotStarPos = true, this.#starPos = this.message?.StarPos ?? this.message?.Route?.[0]?.StarPos);\n\t}\n\n\t/**\n\t * Returns the galactic region for this event's star position.\n\t *\n\t * @returns {{id: number, name: string|null}} Region object with `id` and `name`, or an empty object if the position is unknown.\n\t */\n\tget Region() {\n\t\treturn this.#region ??= (this.StarPos ? RegionMap.findRegion(...this.StarPos) : {});\n\t}\n\n\n\t/**\n\t * Normalizes the schema URL into a clean event string.\n\t * content: https://eddn.edcd.io/schemas/navroute/1 -> \"navroute\"\n\t * content: https://eddn.edcd.io/schemas/commodity/3 -> \"commodity\"\n\t *\n\t * TODO: return \"outfitting/2/test\" etc. with -test suffix?\n\t */\n\tstatic getEventType(data) {\n\t\tif (!data?.$schemaRef) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tlet eventType = data.$schemaRef.match(RX_SCHEMAREF)?.[1] ?? \"\";\n\n\t\t// If it's a journal schema, append the specific game event\n\t\t// Journal events (FSDJump, Docked) are defined inside the 'message.event' property\n\t\tif (eventType === \"journal\" && data.message?.event) {\n\t\t\teventType = `journal:${data.message.event.toLowerCase()}`;\n\t\t}\n\n\t\t// Otherwise, just return the schema name (e.g., \"commodity\", \"shipyard\", \"outfitting\")\n\t\treturn eventType;\n\t}\n\n\t/**\n\t * Determines the game type from header and message flags.\n\t *\n\t * @param {Object} data - The structured EDDN payload.\n\t * @returns {string} One of `\"Odyssey\"`, `\"Horizons\"`, `\"Base\"`, `\"Legacy\"`, or `\"Unknown\"`.\n\t */\n\tstatic getGameType(data) {\n\t\ttry {\n\t\t\t// no decision if gameversion is not set or set to CAPI-<endpoint>\n\t\t\t// https://github.com/EDCD/EDDN/blob/live/docs/Developers.md#gameversions-and-gamebuild\n\t\t\tconst gameversion = data.header.gameversion;\n\t\t\tif (gameversion && (gameversion.startsWith(\"CAPI-Legacy-\") || parseInt(gameversion) < 4)) {\n\t\t\t\treturn \"Legacy\";\n\t\t\t}\n\n\t\t\t// https://github.com/EDCD/EDDN/blob/live/docs/Developers.md#horizons-and-odyssey-flags\n\t\t\tconst msg = data.message;\n\t\t\treturn msg.odyssey ? \"Odyssey\" :\n\t\t\t\t\tmsg.horizons ? \"Horizons\" :\n\t\t\t\t\tmsg.horizons === false ? \"Base\" :\n\t\t\t\t\t\"Unknown\";\n\t\t} catch (err) {\n\t\t\tconsole.error(\"gameversion error:\", err);\n\t\t\treturn \"Unknown\";\n\t\t}\n\t}\n}\n\n\n// extract schema name into $1\nconst RX_SCHEMAREF = /\\/schemas\\/([^/]+)\\/(\\d+)(\\/test)?$/;\n", "/**\n * @module EDDNClient\n * @description WebSocket client for connecting to EDDN relay servers, parsing\n * incoming messages into {@link EDDNEvent} instances, and re-dispatching them\n * as DOM-style events. Includes connection watchdog and optional message filtering.\n */\n\nimport { EDDNEvent } from \"#eddn/EDDNEvent.js\";\n\n\n/**\n * WebSocket client that connects to an EDDN relay, parses incoming messages\n * into {@link EDDNEvent} instances, and re-dispatches them as DOM-style events.\n *\n * Emitted events:\n * - `open`          \u2013 the underlying WebSocket connection opened.\n * - `close`         \u2013 the underlying WebSocket connection closed.\n * - `error`         \u2013 a WebSocket-level error occurred.\n * - `eddn:message`  \u2013 a valid EDDN message was received (dispatched as {@link EDDNEvent}).\n * - `eddn:error`    \u2013 an EDDN message could not be parsed or validated.\n *\n * @extends EventTarget\n */\nexport class EDDNClient extends EventTarget {\n\t#WebSocketClass; // the WebSocket class prototype used to create a new connection, defaults to WebSocket\n\n\t#abortController = null; // event handler decoupler\n\t#textDecoder = null; // decodes bytes to string (binary frames)\n\t#socket = null;\n\n\t#lastEvent = null; // timestamp of last valid message from socket\n\t#watchdogTimer = null;\n\n\t#filterFunction = () => true; // accept all messages\n\n\t#protocol = []; // [\"v2.ws.eddn-realtime.space\", \"v1.ws.eddn-realtime.space\"]; // currently unused\n\n\turl = \"ws://127.0.0.1:8081\";\n\n\tresetTimeout = 0; // idle timeout (ms) before watchdog reconnects the socket, 0 to disable watchdog\n\n\n\t/**\n\t * Creates a new EDDNClient.\n\t *\n\t * @param {Object} [options={}] - Configuration options.\n\t * @param {string} [options.url] - WebSocket URL to connect to.\n\t * @param {number} [options.resetTimeout] - Idle timeout in ms before the watchdog reconnects.\n\t * @param {Function} [options.filter] - Predicate applied to each {@link EDDNEvent}; returning `false` suppresses dispatch.\n\t * @param {typeof WebSocket} [options.WebSocketClass] - WebSocket constructor to use (defaults to the global `WebSocket`).\n\t * @param {AbortSignal} [options.signal] - An AbortSignal that, when aborted, closes the connection.\n\t */\n\tconstructor(options = {}) {\n\t\tsuper();\n\n\t\tconst { url, resetTimeout, filter, WebSocketClass, signal } = options;\n\n\t\t// TODO: use URL() to validate / check for \"^wss?://\"?\n\t\tthis.url = url ?? this.url;\n\n\t\tthis.#WebSocketClass = WebSocketClass ?? WebSocket;\n\n\t\tif (resetTimeout) {\n\t\t\tif (!Number.isInteger(resetTimeout)) {\n\t\t\t\tthrow new Error(\"resetTimeout must be an integer\");\n\t\t\t}\n\n\t\t\tthis.resetTimeout = resetTimeout;\n\t\t}\n\n\t\tif (filter) {\n\t\t\tif (typeof filter !== \"function\") {\n\t\t\t\tthrow new Error(\"filter must be a function\");\n\t\t\t}\n\n\t\t\tthis.#filterFunction = filter;\n\t\t}\n\n\t\t// close connection on optional abort signal\n\t\t// TODO: block `connect()` after abort?\n\t\tsignal?.addEventListener(\"abort\", () => this.close(), { once: true });\n\t}\n\n\n\t/**\n\t * Opens a new WebSocket connection. If a connection is already open it is\n\t * closed first.\n\t */\n\tconnect() {\n\t\t// close and clear old socket on reconnect\n\t\tif (this.#socket) {\n\t\t\tthis.close();\n\t\t}\n\n\t\tconsole.debug(\"EDDNClient: connecting\");\n\n\t\t// a signal to close the socket and detach all handlers\n\t\tthis.#abortController = new AbortController();\n\t\tconst signal = this.#abortController.signal;\n\n\t\t// pass abort signal into WebSocket class if it supports it\n\t\tthis.#socket = new this.#WebSocketClass(this.url, this.#protocol, { signal });\n\t\tthis.#socket.binaryType = \"arraybuffer\";\n\n\t\tthis.#attachEventHandlers(this.#socket, signal);\n\t}\n\n\n\t/**\n\t * Closes the current WebSocket connection, stops the watchdog timer,\n\t * detaches all event handlers, and dispatches a synthetic `close` event.\n\t */\n\tclose() {\n\t\tconsole.debug(\"EDDNClient: closing\");\n\n\t\t// cleanup any old watchdog\n\t\tthis.#stopWatchdog();\n\n\t\t// cleanup listeners immediately\n\t\tthis.#abortController?.abort();\n\t\tthis.#abortController = null;\n\n\t\t// discard WebSocket instance\n\t\tthis.#socket?.close();\n\t\tthis.#socket = null;\n\n\t\tconsole.log(\"EDDNClient: WebSocket removed\");\n\n\t\t// inform event listeners now because there won't be a `close` from the socket later\n\t\tthis.dispatchEvent(new CloseEvent(\"close\", {\n\t\t\tcode: 1000,\n\t\t\treason: \"EDDNClient.close() called\",\n\t\t\twasClean: true\n\t\t}));\n\t}\n\n\n\t/**\n\t * Handles a raw WebSocket `message` event by parsing the data and\n\t * forwarding it to {@link EDDNClient#handleEDDNMessage}.\n\t *\n\t * @param {MessageEvent} originalEvent - The WebSocket message event.\n\t */\n\t#handleMessage(originalEvent) {\n\t\tif (this.#socket !== originalEvent.target) {\n\t\t\tconsole.warn(\"EDDNClient: spurious `message` from unknown socket:\", originalEvent);\n\t\t\treturn;\n\t\t}\n\n\t\tconst rawData = originalEvent.data;\n\t\tlet data;\n\n\t\ttry {\n\t\t\t// JSON in Text frames\n\t\t\tif (typeof rawData === \"string\") {\n\t\t\t\tdata = JSON.parse(rawData);\n\t\t\t}\n\n\t\t\t// JSON in binary frames\n\t\t\telse if (rawData instanceof ArrayBuffer) {\n\t\t\t\tdata = JSON.parse((this.#textDecoder ??= new TextDecoder(\"utf-8\")).decode(rawData));\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tthrow new Error(`Unexpected message format (${typeof rawData})`);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis.dispatchEvent(new ErrorEvent(\"eddn:error\", { message: \"Message parse error\", error: err }));\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#handleEDDNMessage(data);\n\t}\n\n\t/**\n\t * Validates an EDDN payload, wraps it in an {@link EDDNEvent}, applies the\n\t * filter function, and dispatches it if accepted.\n\t *\n\t * @param {Object} data - Parsed EDDN message object.\n\t */\n\t#handleEDDNMessage(data) {\n\t\t// TODO: if validation fails, pass on the received data as a field on a custom EDDNErrorEvent\n\n\t\tlet event;\n\t\ttry {\n\t\t\tconst { $schemaRef, header, message } = data;\n\n\t\t\t// TODO: check typeof?\n\t\t\t//       - why here and not in EDDNEvent?\n\t\t\tif (!$schemaRef || !header || !message) {\n\t\t\t\tthrow new Error(\"Missing required properties\");\n\t\t\t}\n\t\t\t// TODO: why not pass on `data` instead?\n\t\t\t//       - this normalizes the top level, ignoring additional properties\n\t\t\t//       - the clients could want additional properties if EDDN ever defines them\n\t\t\t//       - EDDNEvent already extracts these properties\n\t\t\tevent = new EDDNEvent(\"eddn:message\", { $schemaRef, header, message });\n\n\t\t\t// get game event type from schema or journal event\n\t\t\tif (!event.eventType) {\n\t\t\t\tthrow new Error(\"Unknown event type\");\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tthis.dispatchEvent(new ErrorEvent(\"eddn:error\", { message: \"Message content error\", error: err }));\n\t\t\treturn;\n\t\t}\n\n\t\t// update watchdog timestamp\n\t\tthis.#lastEvent = Date.now();\n\n\t\tif (this.#filterFunction(event)) {\n\t\t\tthis.dispatchEvent(event);\n\t\t}\n\t}\n\n\n\t/**\n\t * Handles the WebSocket `open` event. Resets the watchdog and dispatches\n\t * an `open` event to listeners.\n\t *\n\t * @param {Event} originalEvent - The WebSocket open event.\n\t */\n\t#handleOpen(originalEvent) {\n\t\t// TODO: an unexpected open should not happen. close()?\n\t\tif (this.#socket !== originalEvent.target) {\n\t\t\tconsole.warn(\"EDDNClient: spurious `open` from unknown socket:\", originalEvent);\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log(`EDDNClient: WebSocket connected${this.#socket.protocol ? ` with protocol '${this.#socket.protocol}'` : \"\"}`);\n\n\t\t// reset watchdog\n\t\tthis.#stopWatchdog();\n\t\tthis.#watchdog();\n\n\t\tthis.#lastEvent = Date.now();\n\n\t\tthis.dispatchEvent(new Event(\"open\"));\n\t}\n\n\n\t/**\n\t * Handles the WebSocket `close` event. Stops the watchdog and dispatches a\n\t * `close` event to listeners.\n\t *\n\t * @param {CloseEvent} originalEvent - The WebSocket close event.\n\t */\n\t#handleClose(originalEvent) {\n\t\tif (this.#socket !== originalEvent.target) {\n\t\t\tconsole.warn(\"EDDNClient: spurious `close` from unknown socket:\", originalEvent);\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log(\"EDDNClient: WebSocket closed\");\n\n\t\t// stop watchdog\n\t\tthis.#stopWatchdog();\n\n\t\t// TODO: a standard WebSocket is \"dead\" after CLOSED while ReconnectingWebSocket potentially continues\n\t\t//       - ReconnectingWebSocket would need to pass `wasForced` or similar?\n\t\t//       - duck-type it on the availability of `reconnect()` for now\n\n\t\t// socket closed\n\t\tif (typeof this.#socket.reconnect !== \"function\") {\n\t\t\tthis.#socket = null;\n\t\t}\n\n\t\tthis.dispatchEvent(new CloseEvent(\"close\", {\n\t\t\tcode: originalEvent.code,\n\t\t\treason: originalEvent.reason,\n\t\t\twasClean: originalEvent.wasClean\n\t\t}));\n\t}\n\n\n\t/**\n\t * Handles the WebSocket `error` event and dispatches an `error` event to listeners.\n\t *\n\t * @param {Event} originalEvent - The WebSocket error event.\n\t */\n\t#handleError(originalEvent) {\n\t\tif (this.#socket !== originalEvent.target) {\n\t\t\tconsole.warn(\"EDDNClient: spurious `error` from unknown socket:\", originalEvent);\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.warn(\"EDDNClient: WebSocket error received\");\n\t\tthis.dispatchEvent(new Event(\"error\"));\n\t}\n\n\n\t/**\n\t * Attaches WebSocket event handlers to the given target.\n\t *\n\t * @param {WebSocket} target - The WebSocket instance to listen on.\n\t * @param {AbortSignal} signal - Signal used to automatically remove the handlers.\n\t */\n\t#attachEventHandlers(target, signal) {\n\t\ttarget.addEventListener(\"open\", (ev) => this.#handleOpen(ev), { signal });\n\t\ttarget.addEventListener(\"close\", (ev) => this.#handleClose(ev), { signal });\n\t\ttarget.addEventListener(\"error\", (ev) => this.#handleError(ev), { signal });\n\t\ttarget.addEventListener(\"message\", (ev) => this.#handleMessage(ev), { signal });\n\t}\n\n\n\t/**\n\t * Periodic watchdog that reconnects the WebSocket if no valid message has\n\t * been received within {@link EDDNClient#resetTimeout} milliseconds.\n\t */\n\t#watchdog() {\n\t\t// terminate watch when the socket is gone or resetTimeout changed to 0\n\t\tif (!this.#socket || this.resetTimeout <= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.#lastEvent && this.#socket.readyState === this.#WebSocketClass.OPEN && (Date.now() - this.#lastEvent) > this.resetTimeout) {\n\t\t\tconsole.log(\"EDDNClient: Receive timeout. Resetting connection.\");\n\n\t\t\t// ReconnectingWebSocket has a .reconnect() method\n\t\t\ttypeof this.#socket.reconnect === \"function\" ? this.#socket.reconnect() : this.connect();\n\n\t\t\t// end this watchdog here - #handleOpen() should start a new one\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO: options\n\t\tconst nextWake = ~~(60000 + Math.random() * 42000);\n\t\t// console.debug(`watchdog: Sleeping for ${nextWake}ms`);\n\n\t\tthis.#watchdogTimer = setTimeout(() => this.#watchdog(), nextWake);\n\t}\n\n\n\t/**\n\t * Stops the watchdog timer and resets the last-event timestamp.\n\t */\n\t#stopWatchdog() {\n\t\tclearTimeout(this.#watchdogTimer);\n\t\tthis.#watchdogTimer = null;\n\t\tthis.#lastEvent = null;\n\t}\n}\n", "/**\n * @module MessageRouter\n * @description Routes messages from an event source to registered callbacks based\n * on specific topics. Supports topic subscriptions and wildcard listeners for\n * {@link EDDNEvent} dispatching.\n */\n\n/**\n * Routes messages from an event source to registered callbacks based on specific topics.\n */\nexport class MessageRouter {\n\t#topics = new Map();\n\t#wildcards = new Set();\n\n\n\t/**\n\t * Creates a new MessageRouter instance.\n\t * @param {EventTarget} source - The source object dispatching \"eddn:message\" events.\n\t * @param {Object} [options={}] - Optional configuration.\n\t * @param {AbortSignal} [options.signal] - An AbortSignal to remove the event listener from the source.\n\t */\n\tconstructor(source, options = {}) {\n\t\t// optional external abort signal, drop all callbacks, prevent new registration\n\t\tconst { signal } = options;\n\t\tsignal?.addEventListener(\"abort\", () => { this.#topics = this.#wildcards = null; }, { once: true });\n\n\t\tsource.addEventListener(\"eddn:message\", (event) => this.#dispatch(event), { signal });\n\t}\n\n\n\t/**\n\t * Registers a callback function for one or more topics.\n\t * If no topics are provided, or if the topic is \"*\", the callback acts as a wildcard listener.\n\t * @param {Function} callback - The function to invoke when a matching message is received.\n\t * @param {string|Iterable<string>} [topics] - A single topic string, an iterable of strings, or undefined for wildcard.\n\t * @param {Object} [options={}] - Optional configuration.\n\t * @param {AbortSignal} [options.signal] - An AbortSignal that, when aborted, unregisters the callback from the specified topics.\n\t */\n\tregister(callback, topics, options = {}) {\n\t\tconst { signal } = options;\n\n\t\tif (!topics) {\n\t\t\tif (!this.#wildcards.has(callback)) {\n\t\t\t\tthis.#wildcards.add(callback);\n\t\t\t\tsignal?.addEventListener(\"abort\", () => this.unregister(callback, [\"*\"]), { once: true });\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// support passing a single string\n\t\tif (typeof topics === \"string\") {\n\t\t\ttopics = [topics];\n\t\t}\n\n\t\telse if (typeof topics[Symbol.iterator] !== \"function\") {\n\t\t\tthrow new TypeError(\"topics must be iterable\");\n\t\t}\n\n\t\t// make a persistent copy of the potentially consumable iterator, for the unregister handler\n\t\ttopics = Array.from(topics);\n\n\t\t// TODO: could possibly queue up multiple listeners for the same callback\n\t\t//       - we'd have to check each set, add listener if any `.has()` returned false\n\t\tsignal?.addEventListener(\"abort\", () => this.unregister(callback, topics), { once: true });\n\n\t\tfor (const topic of topics) {\n\t\t\tif (topic === \"*\") {\n\t\t\t\tthis.#wildcards.add(callback);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet tgroup = this.#topics.get(topic);\n\n\t\t\tif (!tgroup) {\n\t\t\t\ttgroup = new Set();\n\t\t\t\tthis.#topics.set(topic, tgroup);\n\t\t\t}\n\n\t\t\ttgroup.add(callback);\n\t\t}\n\t}\n\n\n\t/**\n\t * Unregisters a callback from specific topics.\n\t * @param {Function} callback - The callback function to remove.\n\t * @param {string|Iterable<string>} [topics] - The specific topic(s) to unregister from. If omitted, unregisters from all list.\n\t */\n\tunregister(callback, topics) {\n\t\tif (!topics) {\n\t\t\tthis.unregisterAll(callback);\n\t\t\treturn;\n\t\t}\n\n\t\t// support passing a single string\n\t\tif (typeof topics === \"string\") {\n\t\t\ttopics = [topics];\n\t\t}\n\n\t\telse if (typeof topics[Symbol.iterator] !== \"function\") {\n\t\t\tthrow new TypeError(\"topics must be iterable\");\n\t\t}\n\n\t\tfor (const topic of topics) {\n\t\t\tif (topic === \"*\") {\n\t\t\t\tthis.#wildcards.delete(callback);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst tgroup = this.#topics.get(topic);\n\n\t\t\tif (tgroup) {\n\t\t\t\ttgroup.delete(callback);\n\n\t\t\t\tif (tgroup.size === 0) {\n\t\t\t\t\tthis.#topics.delete(topic);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/**\n\t * Removes the specified callback from all topics and wildcard lists.\n\t * @param {Function} callback - The callback function to remove completely.\n\t */\n\tunregisterAll(callback) {\n\t\tthis.#wildcards.delete(callback);\n\n\t\tfor (const [topic, tgroup] of this.#topics) {\n\t\t\ttgroup.delete(callback);\n\n\t\t\tif (tgroup.size === 0) {\n\t\t\t\tthis.#topics.delete(topic);\n\t\t\t}\n\t\t}\n\t}\n\n\n\t/**\n\t * Internal dispatcher that invokes callbacks matching the event's topic.\n\t * @param {Object} event - The message event containing an `eventType` property.\n\t */\n\t#dispatch(event) {\n\t\tif (this.#wildcards.size > 0) {\n\t\t\tfor (const callback of this.#wildcards) {\n\t\t\t\tinvoke(callback, event);\n\t\t\t}\n\t\t}\n\n\t\tconst tgroup = this.#topics.get(event.eventType);\n\t\tif (tgroup) {\n\t\t\tfor (const callback of tgroup) {\n\t\t\t\tinvoke(callback, event);\n\t\t\t}\n\t\t}\n\t}\n}\n\n\n/**\n * Helper to safely invoke a callback without crashing the router on errors.\n * @param {Function} cb - The callback to execute.\n * @param {Object} event - The event data to pass to the callback.\n */\nfunction invoke(cb, event) {\n\ttry {\n\t\tcb(event);\n\t} catch (err) {\n\t\tconsole.error(\"MessageRouter: Error in message handler:\", err);\n\t}\n}\n", "/**\n * @module infobox\n * @description Manages the display of EDDN message contents in a popup overlay\n * box with clipboard copy actions. Maps UI elements to their underlying data\n * objects and handles user interactions.\n */\n\n/**\n * Manages the display of message contents in a popup/overlay box.\n * Maps UI elements (rows) to their underlying data objects.\n */\nexport class InfoBox {\n\t#container; // new InfoBox appended here\n\t#template; // InfoBox <template> element\n\n\t/**\n\t * Creates an instance of InfoBox.\n\t * @param {HTMLElement} container - The DOM element where the InfoBox will be appended.\n\t * @param {HTMLTemplateElement} template - The template element containing the InfoBox structure.\n\t */\n\tconstructor(container, template) {\n\t\tthis.#container = container;\n\t\tthis.#template = template;\n\t}\n\n\n\t/**\n\t * Displays the contents of an EDDN message in a popup overlay. Provides\n\t * action buttons for copying data to the clipboard and closing the box.\n\t *\n\t * @param {Object} msg - The EDDN message data object `{ $schemaRef, header, message }`.\n\t */\n\tshow(msg) {\n\t\tif (!msg) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst msgText = JSON.stringify(msg, null, 2);\n\n\t\t// clone the template's first child element, a node reference needed to call .remove() on\n\t\t// importNode() vs cloneNode() makes a difference if the <template> contains custom elements\n\t\tconst infoBox = document.importNode(this.#template.content, true).firstElementChild;\n\n\t\tconst actions = {\n\t\t\t\"copy-msg\": (button) => InfoBox.#copyToClipboard(msgText, button),\n\t\t\t\"copy-gts\": (button) => InfoBox.#copyToClipboard(msg.header?.gatewayTimestamp, button),\n\t\t\t\"copy-uid\": (button) => InfoBox.#copyToClipboard(msg.header?.uploaderID, button),\n\t\t\t\"close\": () => infoBox.remove(),\n\t\t};\n\n\t\tinfoBox.querySelector(\".infobox__content\").textContent = msgText;\n\n\t\tinfoBox.querySelector(\".infobox__header\").addEventListener(\"click\", (ev) => {\n\t\t\tev.stopPropagation();\n\n\t\t\t// find the action button that was clicked\n\t\t\t// TODO: verify that infoBox.contains(target)?\n\t\t\tconst target = ev.target.closest(\".infobox__header [data-infobox__action]\");\n\n\t\t\t// default action: close on click anywhere in header\n\t\t\tconst action = target?.dataset.infobox__action ?? \"close\";\n\n\t\t\t// TODO: log if action not found?\n\t\t\tactions[action]?.(target);\n\t\t});\n\n\t\tthis.#container.append(infoBox);\n\t}\n\n\n\t// TODO: move to utils?\n\n\t/**\n\t * Copies text to the clipboard and triggers a success/error animation on the button.\n\t * @param {string} text - The text to copy.\n\t * @param {HTMLElement} element - The button element to animate.\n\t * @returns {Promise<void>} A promise that resolves when the operation is complete.\n\t */\n\tstatic #copyToClipboard(text, element) {\n\t\treturn new Promise(() => {\n\t\t\t// clipboard not available in insecure (HTTP) context and others\n\t\t\tif (!navigator.clipboard) {\n\t\t\t\tconsole.warn(\"InfoBox: clipboard API unavailable\");\n\t\t\t\tInfoBox.#triggerAnimation(element, \"infobox__button--signal-error\");\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnavigator.clipboard.writeText(text)\n\t\t\t\t.then(() => {\n\t\t\t\t\treturn InfoBox.#triggerAnimation(element, \"infobox__button--signal-success\");\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tconsole.warn(\"InfoBox: clipboard copy error:\", err);\n\t\t\t\t\tInfoBox.#triggerAnimation(element, \"infobox__button--signal-error\");\n\t\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Triggers a CSS animation class on an element and returns a Promise \n\t * that resolves when the animation completes.\n\t * @param {HTMLElement} element - The DOM node to animate.\n\t * @param {string} className - The CSS class containing the animation.\n\t * @returns {Promise<void>}\n\t */\n\tstatic #triggerAnimation(element, className) {\n\t\treturn new Promise((resolve) => {\n\t\t\telement.classList.remove(className);\n\n\t\t\t// force immediate CSS update to reset animation\n\t\t\tvoid element.offsetWidth;\n\n\t\t\telement.addEventListener('animationend', () => {\n\t\t\t\telement.classList.remove(className);\n\t\t\t\tresolve();\n\t\t\t}, { once: true });\n\n\t\t\telement.classList.add(className);\n\t\t});\n\t}\n}\n", "/**\n * @module DashboardModule\n * @description Base class for all dashboard modules. Registers callbacks with the\n * {@link MessageRouter} for specified topics and delegates incoming\n * {@link EDDNEvent} events to subclass handlers. Includes specialized\n * {@link DataTableModule} for rendering table-based displays.\n */\n\nimport { Config } from \"#config.js\";\n\n\n/**\n * Base class for all dashboard modules. Registers a callback with the\n * {@link MessageRouter} for the specified topics and delegates incoming\n * events to {@link DashboardModule#_handleEvent}.\n */\nexport class DashboardModule {\n\t/**\n\t * Creates a new DashboardModule.\n\t *\n\t * @param {MessageRouter|null} router - The {@link MessageRouter} to subscribe to, or `null` for dummy modules.\n\t * @param {string|Iterable<string>} topics - Topic(s) to subscribe to (e.g. `\"journal:fsdjump\"`, `\"*\"`).\n\t */\n\tconstructor(router, topics) {\n\t\t// allow empty router for DummyModule\n\t\tif (!router) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO: allow empty topic for wildcard?\n\t\tif (!topics) {\n\t\t\tthrow new Error(\"DashboardModule: missing required arguments\");\n\t\t}\n\n\t\trouter.register((event) => this._handleEvent(event), topics);\n\t}\n\n\n\t/**\n\t * Processes an incoming EDDN event. Override in subclasses to implement\n\t * module-specific behaviour.\n\t *\n\t * @param {EDDNEvent} _event - The EDDN event to handle.\n\t */\n\t_handleEvent(_event) {\n\t\t// base class\n\t}\n}\n\n\n/**\n * A {@link DashboardModule} subclass that renders incoming events as table\n * rows inside a `<tbody>`. Provides batched rendering via\n * `requestAnimationFrame`, overflow trimming, and helper methods for\n * constructing table cells and rows.\n *\n * @extends DashboardModule\n */\n// TODO: keep and re-use a pool of DOM nodes?\n\nexport class DataTableModule extends DashboardModule {\n\tstatic DATA_KEY = Symbol(); // unique key for event data in DOM node namespace\n\n\t#renderQueue = []; // array of elements to add in next paint cycle\n\t#renderScheduled = false;\n\n\t_container;\n\n\t_tableTemplate;\n\t_rowTemplate; // DOM elements to be cloned by makeCell()/makeRow()\n\t_cellTemplate;\n\n\tlistLength = Config.listLength ?? 20;\n\tcullFactor = 2; // cut back #renderQueue if > listLength * cullFactor // TODO: rename\n\n\n\t/**\n\t * Creates a new DataTableModule.\n\t *\n\t * @param {MessageRouter|null} router - The {@link MessageRouter} to subscribe to.\n\t * @param {string|Iterable<string>|null} topics - Topic(s) to subscribe to.\n\t * @param {Object} [options={}] - Configuration options.\n\t * @param {number} [options.listLength] - Maximum number of visible rows.\n\t * @param {number} [options.cullFactor] - Multiplier of `listLength` for the render-queue overflow threshold.\n\t * @param {HTMLTemplateElement} [options.template] - The HTML `<template>` element for this module's table.\n\t */\n\tconstructor(router, topics, options = {}) {\n\t\tconst { listLength, cullFactor, template } = options;\n\n\t\tif (listLength && !Number.isInteger(listLength)) {\n\t\t\tthrow new Error(\"listLength must be an integer\");\n\t\t}\n\n\t\tif (cullFactor && isNaN(parseFloat(cullFactor))) {\n\t\t\tthrow new Error(\"cullFactor must be a number\");\n\t\t}\n\n\t\tsuper(router, topics);\n\n\t\tlistLength && (this.listLength = listLength);\n\t\tcullFactor && (this.cullFactor = parseFloat(cullFactor));\n\n\t\tthis._tableTemplate = template;\n\n\t\t// TODO: this calls _setupXX() in inheriting classes before their class definition is ready\n\t\tthis._setupTemplates();\n\t}\n\n\n\t/**\n\t * Clones the module's `<template>`, locates the `<tbody>`, fills it with\n\t * placeholder rows if empty, and stores a reference for later rendering.\n\t *\n\t * @returns {DocumentFragment|null} The cloned template DOM, or `null` if no template is set.\n\t */\n\t_setupContainer() {\n\t\tif (!this._tableTemplate) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst table = document.importNode(this._tableTemplate.content, true);\n\t\tconst tbody = table.querySelector(\"tbody\"); // TODO: check\n\t\tif (!tbody.childElementCount && this.listLength) {\n\t\t\ttbody.innerHTML = \"<tr><td>&nbsp;</td></tr>\".repeat(this.listLength);\n\t\t}\n\n\t\tthis._container = tbody;\n\t\treturn table;\n\t}\n\n\n\t/**\n\t * Initialises the default row and cell template elements used by\n\t * {@link DataTableModule#_makeRow} and {@link DataTableModule#_makeCell}.\n\t */\n\t// TODO: define a full row in the template with slots for content?\n\t_setupTemplates() {\n\t\t// row Template\n\t\tthis._rowTemplate = document.createElement(\"tr\");\n\t\tthis._rowTemplate.classList.add(\"data\");\n\n\t\t// cell Template\n\t\tthis._cellTemplate = document.createElement(\"td\");\n\t}\n\n\n\t/**\n\t * Creates a `<td>` element populated with the given text.\n\t *\n\t * @param {string} [textContent] - Text content for the cell.\n\t * @returns {HTMLTableCellElement}\n\t */\n\t_makeCell(textContent) {\n\t\tconst element = this._cellTemplate.cloneNode(false);\n\t\telement.textContent = element.title = textContent ?? \"\";\n\t\treturn element;\n\t}\n\n\n\t/**\n\t * Creates a `<tr>` element styled according to the event's game type,\n\t * taxi/multicrew status, and message age.\n\t *\n\t * @param {EDDNEvent} event - The {@link EDDNEvent} providing classification data.\n\t * @returns {HTMLTableRowElement}\n\t */\n\t_makeRow(event) {\n\t\tconst element = this._rowTemplate.cloneNode(false);\n\t\telement.classList.add(event.gameType);\n\n\t\tif (event.isTaxi) {\n\t\t\telement.classList.add(\"taxi\");\n\t\t}\n\n\t\tif (event.isMulticrew) {\n\t\t\telement.classList.add(\"multicrew\");\n\t\t}\n\n\t\tif (event.age > Config.oldAge) {\n\t\t\telement.classList.add(\"old\");\n\t\t} else if (event.age < Config.newAge) {\n\t\t\telement.classList.add(\"new\");\n\t\t}\n\n\t\treturn element;\n\t}\n\n\n\t/**\n\t * Queues a new row for rendering. The row will be painted in the next\n\t * animation frame.\n\t *\n\t * @param {{event: EDDNEvent, cells: Array<string|Node|Function>}} row - An object containing the source event and an array of cell descriptors.\n\t */\n\t_addRow(row) {\n\t\t// add row to queue\n\t\tthis.#renderQueue.push(row);\n\n\t\t// drop overflowing rows eventually, the page is likely inactive\n\t\tthis.#trimQueue(this.listLength, this.listLength * this.cullFactor);\n\n\t\t// only update the DOM when the page is on display and ready to paint\n\t\tif (!this.#renderScheduled && this.#renderQueue.length) {\n\t\t\tthis.#renderScheduled = true;\n\t\t\trequestAnimationFrame(() => this.#render());\n\t\t}\n\t}\n\n\n\t/**\n\t * Flushes the render queue into the DOM. Called via `requestAnimationFrame`.\n\t */\n\t#render() {\n\t\tconst queue = this.#renderQueue;\n\t\tconst container = this._container;\n\t\tthis.#renderScheduled = false;\n\n\t\tif (!queue.length) {\n\t\t\tconsole.warn(\"DataTableModule: render scheduled on empty queue\");\n\t\t\treturn;\n\t\t}\n\n\t\t// clear table for full replacement if queueLength > listLength\n\t\tif (this.#trimQueue(this.listLength)) {\n\t\t\tcontainer.replaceChildren();\n\t\t}\n\n\t\t// read current element count\n\t\tconst dropCount = (container.childElementCount + queue.length) - this.listLength;\n\n\t\t// batch updates into one DocumentFragment\n\t\tconst fragment = document.createDocumentFragment();\n\t\tfor (const { event, cells } of queue) {\n\n\t\t\t// TODO: check that `event instanceof EDDNEvent`?\n\t\t\tif (!event || !Array.isArray(cells)) {\n\t\t\t\tconsole.warn(\"DataTableModule: missing or invalid properties in render queue item\");\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// TODO: support full row/rowFactory in queue?\n\t\t\tconst newRow = this._makeRow(event);\n\n\t\t\tfor (const cell of cells) {\n\t\t\t\tnewRow.append(\n\t\t\t\t\t(cell instanceof Node) ? cell : // DOM element created in handler\n\t\t\t\t\t(typeof cell === \"function\") ? invoke(cell) ?? this._makeCell() : // callback into module\n\t\t\t\t\tthis._makeCell(cell) // text string\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// store event data reference within node namespace\n\t\t\tnewRow[DataTableModule.DATA_KEY] = event.data;\n\n\t\t\tfragment.prepend(newRow);\n\t\t}\n\n\t\t// reset queue\n\t\tqueue.length = 0;\n\n\t\t// remove older rows from table\n\t\tif (dropCount > 0) {\n\t\t\tfor (let i = 0; i < dropCount; i++) {\n\t\t\t\tcontainer.lastElementChild?.remove();\n\t\t\t}\n\t\t}\n\n\t\t// insert new rows\n\t\tcontainer.prepend(fragment);\n\t}\n\n\n\t/**\n\t * Trims the render queue to at most `hardLimit` entries when the queue\n\t * length exceeds `softLimit` (or `hardLimit` if `softLimit` is omitted).\n\t *\n\t * @param {number} hardLimit - Maximum queue length after trimming.\n\t * @param {number} [softLimit] - Queue length threshold that triggers trimming.\n\t * @returns {number} The number of dropped entries, or `0` if no trimming occurred.\n\t */\n\t#trimQueue(hardLimit, softLimit) {\n\t\tconst queue = this.#renderQueue;\n\t\tconst queueLength = queue.length;\n\n\t\tif (queueLength > (softLimit ?? hardLimit)) {\n\t\t\tconst dropCount = queueLength - hardLimit;\n\n\t\t\t// move queue tail up front ([dropCount]... -> [0]...)\n\t\t\tqueue.copyWithin(0, dropCount);\n\t\t\tqueue.length = hardLimit;\n\n\t\t\treturn dropCount;\n\t\t}\n\n\t\treturn 0;\n\t}\n}\n\n\n/**\n * A no-op {@link DataTableModule} subclass used for placeholder or\n * legend-only modules that do not subscribe to any events.\n *\n * @extends DataTableModule\n */\nexport class DummyTableModule extends DataTableModule {\n\t/**\n\t * Creates a DummyTableModule that renders a static table without subscribing\n\t * to any EDDN topics.\n\t *\n\t * @param {MessageRouter} router - Unused; passed as `null` to the parent.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(null, null, options);\n\t}\n}\n\n\n/**\n * Safely invokes a cell callback, returning `undefined` on error.\n *\n * @param {Function} cb - The callback to execute.\n * @returns {Node|undefined} The result of the callback, or `undefined` if it threw.\n */\nfunction invoke(cb) {\n\ttry {\n\t\treturn cb();\n\t} catch (err) {\n\t\tconsole.error(\"DataTableModule: Error in cell callback:\", err);\n\t\treturn undefined;\n\t}\n}\n\n\nexport default DashboardModule;\n", "/**\n * @module ApproachModule\n * @description Dashboard module that displays approach settlement events from\n * Elite Dangerous, showing settlement names and their star systems.\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\n\n\n/**\n * Dashboard module that displays approach settlement events.\n *\n * @extends DataTableModule\n */\nexport class ApproachModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"approachsettlement\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row showing the settlement name and star system.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tthis._addRow({ event, cells: [ event.message.Name, event.StarSystem ]});\n\t}\n}\n\n\nexport default ApproachModule;\n", "/**\n * @module CodexEntryModule\n * @description Dashboard module that displays Codex discovery entries with decoded\n * category, name, and galactic region information from {@link RegionMap}.\n * Uses {@link GalacticRegions} data for name resolution.\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\nimport GalacticRegions from \"#data/GalacticRegions.json\" with { type: \"json\" };\n\n\n/**\n * Dashboard module that displays Codex discovery entries with decoded\n * category, name, and galactic region information.\n *\n * @extends DataTableModule\n */\nexport class CodexEntryModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"codexentry\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row showing the system, body, sub-category, name, and region.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tconst message = event.message;\n\t\tthis._addRow({ event, cells: [\n\t\t\tmessage.System,\n\t\t\ttrimPrefix(message.BodyName ?? \"\", message.System), // strip system name from body name\n\t\t\tformatCodexKey(message.SubCategory, RX_SUB_CATEGORY), // reformat keys\n\t\t\tformatCodexKey(message.Name, RX_CODEX_NAME),\n\t\t\tGalacticRegions[+(RX_REGION_NAME.exec(message.Region)?.[1] ?? 0)]\n\t\t]});\n\t}\n}\n\n\nconst RX_SUB_CATEGORY = /^\\$Codex_SubCategory_(.*);$/;\nconst RX_CODEX_NAME = /^\\$Codex_Ent_(.*)_Name;$/;\nconst RX_REGION_NAME = /^\\$Codex_RegionName_(.*);$/;\n\n/**\n * Extracts a human-readable label from a Codex key string using the given\n * regex, replacing underscores with spaces.\n *\n * @param {string} str - The raw Codex key string.\n * @param {RegExp} regex - Pattern whose first capture group contains the label.\n * @returns {string} The formatted label, or the original string if no match.\n */\nconst formatCodexKey = (str, regex) => regex.exec(str)?.[1]?.replaceAll(\"_\", \" \") ?? str;\n\n/**\n * Removes a prefix from a string and trims whitespace.\n *\n * @param {string} str - The string to process.\n * @param {string} prefix - The prefix to remove.\n * @returns {string}\n */\nconst trimPrefix = (str, prefix) => (str.startsWith(prefix) ? str.slice(prefix.length) : str).trim();\n\n\nexport default CodexEntryModule;\n", "/**\n * @module EventLogModule\n * @description Dashboard module that displays a detailed log of every incoming\n * {@link EDDNEvent}, including age, uploader ID, event name, software,\n * system, galactic region from {@link RegionMap}, and game version.\n */\n\nimport { Config } from \"#config.js\";\nimport { DataTableModule } from \"#DashboardModule\";\n\n\n/**\n * Dashboard module that displays a detailed log of every incoming EDDN event,\n * including age, uploader ID bar, event name, software, system, region, and\n * game version.\n *\n * @extends DataTableModule\n */\nexport class EventLogModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"*\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row with relative time, coloured uploader-ID bar, event name,\n\t * software details, star system, region, game version, and schema reference.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tthis._addRow({ event, cells: [\n\t\t\tformatRelativeTime(event.age),\n\t\t\t() => this.#idCell(event.header.uploaderID),\n\t\t\tevent.eventName,\n\t\t\tevent.header.softwareName,\n\t\t\tevent.header.softwareVersion,\n\t\t\tevent.StarSystem,\n\t\t\tevent.Region.name,\n\t\t\t`${event.header.gameversion ?? \"\"}${event.header.gamebuild ? ` - ${event.header.gamebuild}` : \"\"}`,\n\t\t\tevent.$schemaRef.replace(RX_SCHEMAREF_EDDN, \"\")\n\t\t]});\n\t}\n\n\t/**\n\t * Creates a table cell displaying a colour-bar visualisation of the\n\t * uploader's hex ID.\n\t *\n\t * @param {string} uploaderID - The uploader's hex identifier.\n\t * @returns {HTMLTableCellElement}\n\t */\n\t#idCell(uploaderID) {\n\t\tconst idCell = this._makeCell(uploaderID);\n\t\tidCell.classList.add(\"dashboard__table--idcell\");\n\t\tidCell.replaceChildren(hex2bar(uploaderID));\n\t\treturn idCell;\n\t}\n}\n\n\nconst RX_SCHEMAREF_EDDN = /^https:\\/\\/eddn\\.edcd\\.io\\/schemas\\//;\n\n\n// time rounding units in seconds\nconst time_units = Object.freeze([\n\t{ unit: 'year', seconds: 31536000 },\n\t{ unit: 'month', seconds: 2592000 },\n\t{ unit: 'day', seconds: 86400 },\n\t{ unit: 'hour', seconds: 3600 },\n\t{ unit: 'minute', seconds: 60 }\n]);\n\n/**\n * Formats a number of ms into a relative time string.\n * @param {number} diffMs - Relative time in ms (positive: past, negative: future)\n * @returns {string} - Relative time string (e.g., \"5 minutes ago\", \"in 2 hours\").\n */\nfunction formatRelativeTime(diffMs) {\n\ttry {\n\t\tconst diffSec = Math.round(-diffMs / 1000);\n\t\tconst diffAbs = Math.abs(diffSec);\n\n\t\tif (diffAbs < 60) {\n\t\t\treturn Config._relTimeFormat.format(diffSec, \"second\");\n\t\t}\n\n\t\t// TODO: reverse the lookup, \"minutes ago\" happens more often than \"years ago\"\n\t\tfor (const { unit, seconds } of time_units) {\n\t\t\tif (diffAbs >= seconds || unit === \"minute\") {\n\t\t\t\tconst value = Math.round(diffSec / seconds);\n\t\t\t\treturn Config._relTimeFormat.format(value, unit);\n\t\t\t}\n\t\t}\n\t} catch (err) {\n\t\tconsole.error(err.message);\n\t\treturn \"Invalid date\";\n\t}\n}\n\n\n// 16 colors per nibble\n// TODO: improve this \"high-contrast\" selection?\nconst hex_colors = Object.freeze({\n\t\"0\": \"#F2F3F4\", \"1\": \"#222222\", \"2\": \"#F3C300\", \"3\": \"#875692\",\n\t\"4\": \"#F38400\", \"5\": \"#A1CAF1\", \"6\": \"#BE0032\", \"7\": \"#C2B280\",\n\t\"8\": \"#848482\", \"9\": \"#008856\",\n\t// belts and braces - duplicate a-f, A-F\n\t\"a\": \"#E68FAC\", \"b\": \"#0067A5\", \"c\": \"#F99379\", \"d\": \"#604E97\",\n\t\"e\": \"#DCD300\", \"f\": \"#B3446C\",\n\t\"A\": \"#E68FAC\", \"B\": \"#0067A5\",\t\"C\": \"#F99379\", \"D\": \"#604E97\",\n\t\"E\": \"#DCD300\", \"F\": \"#B3446C\"\n});\n\n/**\n * Converts a hex identifier string into a `<span>` element with a\n * linear-gradient background where each hex character maps to a colour.\n *\n * @param {string} id - The hex identifier string.\n * @returns {HTMLSpanElement}\n */\nfunction hex2bar(id) {\n\t// hex chars to colored blocks\n\tconst len = id.length;\n\tconst step = 100 / len;\n\tconst stops = [];\n\n\tfor (let i = 0; i < len; i++) {\n\t\tconst color = hex_colors[id[i]] ?? \"#000\";\n\t\t// hard stops for blocky look: color starts at i*step, ends at (i+1)*step\n\t\tstops.push(`${color} ${i * step}% ${(i + 1) * step}%`);\n\t}\n\n\tconst bar = document.createElement(\"span\");\n\tbar.style.background = `linear-gradient(to right, ${stops.join(\",\")})`;\n\tbar.textContent = String.fromCharCode(160); // &nbsp;\n\n\treturn bar;\n}\n\n\n/*\nfunction hex2braille(id) {\n\t// hex chars to braille patterns\n\tlet idstr = \"\";\n\tfor (let i = 0; i < id.length-1; i += 2) {\n\t\tidstr += String.fromCodePoint(parseInt(id.substring(i, i+2), 16) + 0x2800);\n\t}\n\n\treturn idstr;\n}\n*/\n\n\nexport default EventLogModule;\n", "/**\n * @module statsbox\n * @description Provides table-based counters that track and display named\n * statistics. {@link StatsBox} offers insertion-order display while\n * {@link SortedStatsBox} keeps rows sorted by descending value.\n */\n\n// counts and displays named events or other information\n\n\n/**\n * Default factory that creates a `<tr>` element containing the given children.\n *\n * @param {...Node} children - Child nodes to append to the row.\n * @returns {HTMLTableRowElement}\n */\nconst defaultRowFactory = (...children) => { const row = document.createElement(\"tr\"); row.append(...children); return row; };\n\n/**\n * Default factory that creates a `<td>` element with the given text content.\n *\n * @param {string} [textContent] - Text to display in the cell.\n * @returns {HTMLTableCellElement}\n */\nconst defaultCellFactory = (textContent) => { const cell = document.createElement(\"td\"); cell.textContent = textContent ?? \"\"; return cell; };\n\n\n/**\n * Represents a single statistics row in a {@link StatsBox}, consisting of\n * a key label and a value that is displayed in a table cell.\n */\nclass StatsRow {\n\t// TODO: shape-morphism optimization? #value is always a number except for two stats where it's a string\n\t#value = 0;\n\t_key;\n\n\t#cell;\n\t_row;\n\n\t/**\n\t * Creates a new StatsRow.\n\t *\n\t * @param {string} key - The label for this statistic.\n\t * @param {number|string} value - The initial value.\n\t * @param {Function} rowFactory - Factory that creates the `<tr>` element.\n\t * @param {Function} cellFactory - Factory that creates `<td>` elements.\n\t */\n\tconstructor(key, value, rowFactory, cellFactory) {\n\t\tconst kcell = cellFactory(key);\n\n\t\tconst vcell = cellFactory();\n\t\tthis.#cell = vcell;\n\n\t\tthis._key = key;\n\t\tthis._value = value;\n\n\t\tthis._row = rowFactory(kcell, vcell);\n\t}\n\n\tset _value(newValue) {\n\t\tthis.#cell.textContent = this.#value = newValue;\n\t}\n\n\tget _value() {\n\t\treturn this.#value;\n\t}\n}\n\n\n/**\n * A keyed collection of {@link StatsRow} instances rendered into a `<tbody>`.\n * Supports setting values by key and incrementing counters.\n */\nclass StatsBox {\n\t_stats = new Map(); // indices into rows\n\t_rows = []; // array of StatsRow\n\n\t#statsbody;\n\t#cellFactory = (textContent) => defaultCellFactory(textContent);\n\t#rowFactory = (...children) => defaultRowFactory(...children);\n\n\t/**\n\t * Creates a new StatsBox.\n\t *\n\t * @param {HTMLTableSectionElement} tbody - The `<tbody>` element to render rows into.\n\t * @param {Object} [options={}] - Configuration options.\n\t * @param {Object<string, number|string>} [options.values] - Initial key/value pairs.\n\t * @param {Function} [options.rowFactory] - Custom row factory.\n\t * @param {Function} [options.cellFactory] - Custom cell factory.\n\t */\n\tconstructor(tbody, options = {}) {\n\t\ttbody.replaceChildren(); // clear existing table content\n\t\tthis.#statsbody = tbody;\n\n\t\tconst { values, rowFactory, cellFactory } = options;\n\n\t\tthis.#rowFactory = rowFactory ?? this.#rowFactory;\n\t\tthis.#cellFactory = cellFactory ?? this.#cellFactory;\n\n\t\tfor (const key in values) {\n\t\t\tthis.set(key, values[key]);\n\t\t}\n\t}\n\n\t/**\n\t * Checks whether a statistic with the given key exists.\n\t *\n\t * @param {string} key - The statistic name.\n\t * @returns {boolean}\n\t */\n\thas(key) {\n\t\treturn this._stats.has(key);\n\t}\n\n\t/**\n\t * Sets the value for a statistic, creating a new row if the key does not\n\t * already exist.\n\t *\n\t * @param {string} key - The statistic name.\n\t * @param {number|string} value - The value to display.\n\t */\n\tset(key, value) {\n\t\tif (this.has(key)) {\n\t\t\tthis._rows[this._stats.get(key)]._value = value;\n\t\t} else {\n\t\t\tconst stat = new StatsRow(key, value, this.#rowFactory, this.#cellFactory);\n\t\t\tthis._stats.set(key, this._rows.length);\n\t\t\tthis._rows.push(stat);\n\t\t\tthis.#statsbody.append(stat._row);\n\t\t}\n\t}\n\n\t/**\n\t * Increments the value for a statistic by one, creating it with value `1`\n\t * if the key does not already exist.\n\t *\n\t * @param {string} key - The statistic name.\n\t */\n\tinc(key) {\n\t\tif (this.has(key)) {\n\t\t\tthis._rows[this._stats.get(key)]._value++;\n\t\t} else {\n\t\t\tthis.set(key, 1);\n\t\t}\n\t}\n}\n\n\n/**\n * A {@link StatsBox} subclass that keeps rows sorted in descending order\n * by value. Only moves rows upward (new or increased values).\n *\n * @extends StatsBox\n */\n// SortedStatsBox keeps _rows and table sorted\n\nclass SortedStatsBox extends StatsBox {\n\t/**\n\t * Sets a value and re-sorts the affected row upward if necessary.\n\t *\n\t * @param {string} key - The statistic name.\n\t * @param {number|string} value - The value to display.\n\t */\n\t// TODO: sort only moves counters up, not down\n\tset(key, value) {\n\t\tsuper.set(key, value);\n\t\tthis._sort(key);\n\t}\n\n\t/**\n\t * Increments a value and re-sorts the affected row upward if necessary.\n\t *\n\t * @param {string} key - The statistic name.\n\t */\n\tinc(key) {\n\t\tsuper.inc(key);\n\t\tthis._sort(key);\n\t}\n\n\t/**\n\t * Moves the row identified by `key` upward in the array and DOM until it\n\t * is in its correct sorted position.\n\t *\n\t * @param {string} key - The statistic name whose row should be re-sorted.\n\t */\n\t// moves a single key upwards\n\t_sort(key) {\n\t\tconst idxOld = this._stats.get(key);\n\n\t\t// not present or already at the top\n\t\tif (idxOld === undefined || idxOld <= 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst stat = this._rows[idxOld];\n\t\tconst value = stat._value;\n\t\tlet idxNew = idxOld - 1;\n\n\t\t// won't move\n\t\tif (value <= this._rows[idxNew]._value) {\n\t\t\treturn;\n\t\t}\n\n\t\t// find new position in rows array\n\t\twhile (idxNew > 0 && value > this._rows[idxNew-1]._value) {\n\t\t\tidxNew--;\n\t\t}\n\n\t\t// update rows\n\t\tconst rowRef = this._rows[idxNew]._row; // DOM element at this position\n\t\tthis._rows.copyWithin(idxNew+1, idxNew, idxOld); // shift array back by one\n\t\tthis._rows[idxNew] = stat; // re-insert element\n\n\t\t// update indices\n\t\tthis._stats.set(key, idxNew);\n\t\tfor (let i = idxNew+1; i <= idxOld; i++) {\n\t\t\tthis._stats.set(this._rows[i]._key, i);\n\t\t}\n\n\t\trowRef.before(stat._row); // update the DOM last\n\t}\n}\n\n\nexport { StatsBox, SortedStatsBox };\n", "/**\n * @module EventStatsModule\n * @description Dashboard module that counts and displays events grouped by event\n * name, sorted by frequency. Uses {@link SortedStatsBox} for\n * rendering sorted statistics.\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\nimport { SortedStatsBox } from \"#ui/statsbox.js\";\n\n\n/**\n * Dashboard module that counts and displays events grouped by event name,\n * sorted by frequency.\n *\n * @extends DataTableModule\n */\nexport class EventStatsModule extends DataTableModule {\n\t_statsBox;\n\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"*\"], options);\n\t}\n\n\t/**\n\t * Initialises a {@link SortedStatsBox} inside the module's table body.\n\t *\n\t * @returns {DocumentFragment|null}\n\t */\n\t_setupContainer() {\n\t\tconst table = super._setupContainer();\n\t\tthis._statsBox = new SortedStatsBox(this._container);\n\t\treturn table;\n\t}\n\n\t/**\n\t * Increments the counter for the event's name.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tthis._statsBox.inc(event.eventName);\n\t}\n}\n\n\nexport default EventStatsModule;\n", "/**\n * @module FSDJumpModule\n * @description Dashboard module that displays FSD (Frame Shift Drive) jump events\n * showing the destination star system from Elite Dangerous journal events.\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\n\n\n/**\n * Dashboard module that displays FSD jump events showing the destination\n * star system.\n *\n * @extends DataTableModule\n */\nexport class FSDJumpModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"journal:fsdjump\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row showing the star system name.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tthis._addRow({ event, cells: [ event.StarSystem ]});\n\t}\n}\n\n\nexport default FSDJumpModule;\n", "/**\n * @module GameStatsModule\n * @description Dashboard module that displays aggregate statistics about incoming\n * {@link EDDNEvent} events, broken down by game type (Odyssey/Horizons),\n * taxi/multicrew status, and message age. Uses {@link StatsBox}.\n */\n\nimport { Config } from \"#config.js\";\nimport { DataTableModule } from \"#DashboardModule\";\nimport { StatsBox } from \"#ui/statsbox.js\";\n\n\n/**\n * Dashboard module that displays aggregate statistics about incoming events,\n * broken down by game type, taxi/multicrew status, and message age.\n *\n * @extends DataTableModule\n */\nexport class GameStatsModule extends DataTableModule {\n\t_statsBox;\n\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"*\"], options);\n\t}\n\n\t/**\n\t * Initialises the {@link StatsBox} with pre-defined category labels.\n\t *\n\t * @returns {DocumentFragment|null}\n\t */\n\t_setupContainer() {\n\t\tconst table = super._setupContainer();\n\t\tthis._statsBox = new StatsBox(this._container, { values: {\n\t\t\t\"Total\": 0,\n\t\t\t\"Odyssey\": 0,\n\t\t\t\"Horizons\": 0,\n\t\t\t\"Base\": 0,\n\t\t\t\"Legacy\": 0,\n\t\t\t\"Unknown\": 0,\n\t\t\t\"Taxi\": 0,\n\t\t\t\"Multicrew\": 0,\n\t\t\t\"Old\": 0,\n\t\t\t\"New\": 0,\n//\t\t\t\"Last timestamp\": \"\",\n//\t\t\t\"Max jump range\": \"\"\n\t\t}});\n\t\treturn table;\n\t}\n\n\t/**\n\t * Increments the relevant counters for the event's game type, taxi/multicrew\n\t * flags, and message age category.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tthis._statsBox.inc(\"Total\");\n\t\tthis._statsBox.inc(event.gameType);\n\n\t\tif (event.isTaxi) {\n\t\t\tthis._statsBox.inc(\"Taxi\");\n\t\t}\n\n\t\tif (event.isMulticrew) {\n\t\t\tthis._statsBox.inc(\"Multicrew\");\n\t\t}\n\n\t\tif (event.age > Config.oldAge) {\n\t\t\tthis._statsBox.inc(\"Old\");\n\t\t} else if (event.age < Config.newAge) {\n\t\t\tthis._statsBox.inc(\"New\");\n\t\t}\n\n//\t\tthis._statsBox.set(\"Last timestamp\", event.message.timestamp);\n\t}\n}\n\n\nexport default GameStatsModule;\n", "/**\n * @module LocationModule\n * @description Dashboard module that displays location and docking events from\n * Elite Dangerous, showing station names, station types, and star systems.\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\n\n\n/**\n * Dashboard module that displays location and docking events.\n *\n * @extends DataTableModule\n */\nexport class LocationModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"journal:location\", \"journal:docked\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row showing station name, station type, and star system.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tconst message = event.message;\n\t\tthis._addRow({ event, cells: [ message.StationName, message.StationType, event.StarSystem ]});\n\t}\n}\n\n\nexport default LocationModule;\n", "/**\n * @module NavRouteModule\n * @description Dashboard module that displays navigation route events from Elite\n * Dangerous, including start and end systems, jump count, total distance, and\n * longest single jump with highlighting for long-range jumps (\u2265 200 ly).\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\n\n\n/**\n * Dashboard module that displays navigation route events, including start\n * and end systems, jump count, total distance, and longest single jump.\n *\n * @extends DataTableModule\n */\nexport class NavRouteModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"navroute\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row showing start/end systems, jump count, total distance,\n\t * route distance, and longest jump (highlighted for jumps \u2265 200 ly).\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tconst route = event.message.Route ?? [];\n\n\t\tif (route.length < 2) {\n\t\t\t// it happens.\n\t\t\t//console.log(\"Short NavRoute:\", event.data);\n\t\t\treturn;\n\t\t}\n\n\t\tlet dist = 0;\n\t\tlet longest = 0;\n\n\t\tconst cells = [];\n\n\t\tcells.push(\n\t\t\troute[0].StarSystem,\n\t\t\troute[route.length-1].StarSystem,\n\t\t\t`${route.length-1}j`\n\t\t);\n\n\t\tif (route.length === 2) {\n\t\t\t// single-jump route\n\n\t\t\tdist = longest = distance3(route[0].StarPos, route[1].StarPos);\n\t\t\tcells.push(`${dist.toFixed(2)}ly`, \"\");\n\t\t} else {\n\t\t\t// sum jump distances\n\n\t\t\tlet cur;\n\t\t\tfor (const wp of route) {\n\t\t\t\tif (!cur) {\n\t\t\t\t\t// start system\n\t\t\t\t\tcur = wp.StarPos;\n\t\t\t\t\t// distance to destination system\n\t\t\t\t\tcells.push(`${distance3(cur, route[route.length-1].StarPos).toFixed(2)}ly`);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst hop = wp.StarPos;\n\t\t\t\tconst range = distance3(cur, hop);\n\n\t\t\t\tif (longest < range) {\n\t\t\t\t\tlongest = range;\n\t\t\t\t}\n\n\t\t\t\tdist += range;\n\t\t\t\tcur = hop;\n\t\t\t}\n\n\t\t\tcells.push(`${dist.toFixed(2)}ly`);\n\t\t}\n\n/*\n\t\t// update the record\n\t\tif (maxrange < longest) {\n\t\t\tmaxrange = longest;\n\t\t\tgameStats.set(\"Max jump range\", `${longest.toFixed(2)}ly`);\n\t\t}\n*/\n\n\t\t// TODO: why is this not configurable?\n\t\tif (longest < 200) {\n\t\t\tcells.push(`${longest.toFixed(2)}ly`);\n\t\t} else {\n\t\t\t// custom node with extra CSS class\n\t\t\tconst cell = this._makeCell(`${longest.toFixed(2)}ly`);\n\t\t\tcell.classList.add(\"longjump\");\n\t\t\tcells.push(cell);\n\t\t}\n\n\t\tthis._addRow({ event, cells });\n\t}\n}\n\n\n// const distanceN = (v0, v1) => Math.hypot(...v0.map((v, i) => v - v1[i]));\nconst distance3 = (v0, v1) => Math.hypot(v0[0] - v1[0], v0[1] - v1[1], v0[2] - v1[2]); // subtract vectors, return length\n\n\nexport default NavRouteModule;\n", "/**\n * @module NewBodiesModule\n * @description Dashboard module that displays newly discovered (unmapped) planetary\n * bodies from Elite Dangerous scan events. Filters out previously discovered or\n * mapped bodies and NavBeacon scans.\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\n\n\n/**\n * Dashboard module that displays newly discovered (unmapped) planetary bodies.\n *\n * @extends DataTableModule\n */\nexport class NewBodiesModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"journal:scan\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row for undiscovered planets, filtering out previously\n\t * discovered bodies, mapped bodies, and NavBeacon scans.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tconst message = event.message;\n\t\tif (!(message.WasDiscovered === false && message.WasMapped === false && message.ScanType !== \"NavBeaconDetail\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!message.PlanetClass) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._addRow({ event, cells: [\n\t\t\tmessage.BodyName,\n\t\t\tmessage.PlanetClass,\n\t\t\tmessage.AtmosphereType && message.AtmosphereType !== \"None\" ? message.AtmosphereType : \"\",\n\t\t\tmessage.Landable ? \"Yes\" : \"\"\n\t\t]});\n\t}\n}\n\n\nexport default NewBodiesModule;\n", "/**\n * @module NewStarsModule\n * @description Dashboard module that displays newly discovered (unmapped) stars\n * from Elite Dangerous scan events. Filters out previously discovered or mapped\n * bodies and NavBeacon scans, showing only stars (stellar bodies).\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\n\n\n/**\n * Dashboard module that displays newly discovered (unmapped) stars.\n *\n * @extends DataTableModule\n */\nexport class NewStarsModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"journal:scan\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row for undiscovered stars, filtering out previously\n\t * discovered bodies, mapped bodies, and NavBeacon scans.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tconst message = event.message;\n\t\tif (!(message.WasDiscovered === false && message.WasMapped === false && message.ScanType !== \"NavBeaconDetail\")) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!message.StarType) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._addRow({ event, cells: [\n\t\t\tmessage.BodyName,\n\t\t\t`${message.StarType} ${message.Subclass}`\n\t\t]});\n\t}\n}\n\n\nexport default NewStarsModule;\n", "/**\n * @module SoftwareStatsModule\n * @description Dashboard module that counts and displays events grouped by uploader\n * software name and version. Uses {@link StatsBox} to track\n * different EDDN client applications.\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\nimport { StatsBox } from \"#ui/statsbox.js\";\n\n\n/**\n * Dashboard module that counts and displays events grouped by uploader\n * software name and version.\n *\n * @extends DataTableModule\n */\nexport class SoftwareStatsModule extends DataTableModule {\n\t_statsBox;\n\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"*\"], options);\n\t}\n\n\t/**\n\t * Initialises the {@link StatsBox} inside the module's table body.\n\t *\n\t * @returns {DocumentFragment|null}\n\t */\n\t_setupContainer() {\n\t\tconst table = super._setupContainer();\n\t\tthis._statsBox = new StatsBox(this._container);\n\t\treturn table;\n\t}\n\n\t/**\n\t * Increments the counter for the event's software name and version,\n\t * re-sorting the table when a new entry is added.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\t// TODO: this should go into SortedStatsBox and insert new tr in the right position\n\n\t\t// TODO: group totals by softwareName, collapse individual versions\n\t\tconst header = event.header;\n\t\tconst tag = `${header.softwareName} ${header.softwareVersion}`;\n\n\t\t// sort and replace the whole table if its element count changed\n\t\tconst needsort = !this._statsBox.has(tag);\n\t\tthis._statsBox.inc(tag);\n\n\t\tif (needsort) {\n\t\t\tconst tbody = this._container;\n\t\t\ttbody.replaceChildren(...[...tbody.children].sort((a, b) => b.children[0].textContent.localeCompare(a.children[0].textContent)));\n\t\t}\n\t}\n}\n\n\nexport default SoftwareStatsModule;\n", "/**\n * @module ScanModule\n * @description Dashboard module that displays all scan events from Elite Dangerous,\n * showing body names and scan types (Detailed, AutoScan, Basic, NavBeaconDetail).\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\n\n\n/**\n * Dashboard module that displays all scan events.\n *\n * @extends DataTableModule\n */\nexport class ScanModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"journal:scan\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row showing the body name and scan type.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tthis._addRow({ event, cells: [\n\t\t\tevent.message.BodyName,\n\t\t\tevent.message.ScanType\n\t\t]});\n\t}\n}\n\n\nexport default ScanModule;\n", "/**\n * @module UpdatesModule\n * @description Dashboard module that displays station update events from Elite\n * Dangerous, including commodity market data, outfitting, and shipyard updates.\n */\n\nimport { DataTableModule } from \"#DashboardModule\";\n\n\n/**\n * Dashboard module that displays station update events (commodity, outfitting,\n * and shipyard data uploads).\n *\n * @extends DataTableModule\n */\nexport class UpdatesModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"commodity\", \"outfitting\", \"shipyard\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row showing the update type, station name, and system name.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tconst message = event.message;\n\n\t\tthis._addRow({ event, cells: [\n\t\t\tevent.eventType === \"commodity\" ? \"Market\" :\n\t\t\tevent.eventType === \"shipyard\" ? \"Shipyard\" :\n\t\t\tevent.eventType === \"outfitting\" ? \"Outfitting\" :\n\t\t\t\"\",\n\t\t\tmessage.stationName,\n\t\t\tmessage.systemName\n\t\t]});\n\t}\n}\n\n\nexport default UpdatesModule;\n", "/**\n * @module VisitsModule\n * @description Dashboard module that displays FSD jump events to populated or\n * allegiance systems from Elite Dangerous, showing population, faction information,\n * and system state data.\n */\n\nimport { Config } from \"#config.js\";\nimport { DataTableModule } from \"#DashboardModule\";\n\n\n/**\n * Dashboard module that displays FSD jump events to populated or allegiance\n * systems, showing population and faction information.\n *\n * @extends DataTableModule\n */\nexport class VisitsModule extends DataTableModule {\n\t/**\n\t * @param {MessageRouter} router - The {@link MessageRouter} to subscribe to.\n\t * @param {Object} [options] - Configuration forwarded to {@link DataTableModule}.\n\t */\n\tconstructor(router, options) {\n\t\tsuper(router, [\"journal:fsdjump\"], options);\n\t}\n\n\n\t/**\n\t * Renders a row for jumps into populated systems, showing system name,\n\t * population, allegiance, controlling faction, and faction state.\n\t *\n\t * @param {EDDNEvent} event - The incoming {@link EDDNEvent}.\n\t */\n\t_handleEvent(event) {\n\t\tconst message = event.message;\n\t\tif (message.Population > 0 || message.SystemAllegiance) {\n\t\t\tconst faction = message.SystemFaction ?? {};\n\n\t\t\tthis._addRow({ event, cells: [\n\t\t\t\tevent.StarSystem,\n\t\t\t\tConfig._numberFormat.format(message.Population ?? 0),\n\t\t\t\tmessage.SystemAllegiance,\n\t\t\t\tfaction.Name,\n\t\t\t\tfaction.FactionState\n\t\t\t]});\n\t\t}\n\t}\n}\n\n\nexport default VisitsModule;\n", "/**\n * @module Dashboard\n * @description Manages the lifecycle of dashboard modules. Loads HTML templates,\n * creates module instances from either DOM elements or a configuration array, and\n * wires them into a {@link MessageRouter} for receiving EDDN events.\n */\n\nimport { Config } from \"#config.js\";\nimport { InfoBox } from \"#ui/infobox.js\";\n\n\nimport ApproachModule from \"#modules/ApproachModule.js\";\nimport CodexEntryModule from \"#modules/CodexEntryModule.js\";\nimport EventLogModule from \"#modules/EventLogModule.js\";\nimport EventStatsModule from \"#modules/EventStatsModule.js\";\nimport FSDJumpModule from \"#modules/FSDJumpModule.js\";\nimport GameStatsModule from \"#modules/GameStatsModule.js\";\nimport LocationModule from \"#modules/LocationModule.js\";\nimport NavRouteModule from \"#modules/NavRouteModule.js\";\nimport NewBodiesModule from \"#modules/NewBodiesModule.js\";\nimport NewStarsModule from \"#modules/NewStarsModule.js\";\nimport SoftwareStatsModule from \"#modules/SoftwareStatsModule.js\";\nimport ScanModule from \"#modules/ScanModule.js\";\nimport UpdatesModule from \"#modules/UpdatesModule.js\";\nimport VisitsModule from \"#modules/VisitsModule.js\";\n\nimport { DataTableModule, DummyTableModule } from \"#DashboardModule\";\n\n\nconst defaultModules = {\n\t\"Approach\": ApproachModule,\n\t\"CodexEntry\": CodexEntryModule,\n\t\"EventLog\": EventLogModule,\n\t\"EventStats\": EventStatsModule,\n\t\"FSDJump\": FSDJumpModule,\n\t\"GameStats\": GameStatsModule,\n\t\"Legend\": DummyTableModule,\n\t\"Location\": LocationModule,\n\t\"NavRoute\": NavRouteModule,\n\t\"NewBodies\": NewBodiesModule,\n\t\"NewStars\": NewStarsModule,\n\t\"Scan\": ScanModule,\n\t\"SoftwareStats\": SoftwareStatsModule,\n\t\"Updates\": UpdatesModule,\n\t\"Visits\": VisitsModule,\n};\n\n\n/**\n * Manages the lifecycle of dashboard modules. Loads HTML templates, creates\n * module instances from either DOM elements or a configuration array, and\n * wires them into a {@link MessageRouter} for receiving EDDN events.\n */\nexport class Dashboard {\n\t#router; // MessageRouter instance\n\t#container; // new modules appended here\n\t#infoBox; // data map\n\n\t#templates = new Map();\n\t#readyPromise = null;\n\n\t/**\n\t * Promise that resolves when all HTML templates have been loaded.\n\t *\n\t * @type {Promise<void>}\n\t */\n\tget ready() { return this.#readyPromise ??= this.#loadTemplates(); }\n\n\t/**\n\t * The DOM container element that holds all dashboard modules.\n\t *\n\t * @type {HTMLElement}\n\t */\n\tget container() { return this.#container; }\n\n\n\t/**\n\t * Creates a new Dashboard.\n\t *\n\t * @param {MessageRouter} router - The {@link MessageRouter} that dispatches EDDN events to modules.\n\t * @param {Object} [options={}] - Configuration options.\n\t * @param {HTMLElement} [options.container] - An existing DOM container; a new `<div>` is created if omitted.\n\t * @param {InfoBox} [options.infoBox] - An existing {@link InfoBox} instance to reuse.\n\t */\n\tconstructor(router, options = {}) {\n\t\tthis.#router = router;\n\n\t\t// TODO: add per-instance modules/templates/template file name to options?\n\t\tconst { container, infoBox } = options;\n\n\t\tif (container) {\n\t\t\tthis.#container = container;\n\t\t} else {\n\t\t\t// TODO: template?\n\t\t\tconst newContainer = document.createElement(\"div\");\n\t\t\tnewContainer.className = \"dashboard\";\n\t\t\tthis.#container = newContainer;\n\t\t}\n\n\t\tif (infoBox) {\n\t\t\tthis.#infoBox = infoBox;\n\t\t}\n\n\t\tvoid this.ready;\n\t}\n\n\n\t/**\n\t * Creates dashboard modules from `<div data-dashboard__module=\"...\">` elements\n\t * found inside the container. Each matching element is replaced with the\n\t * rendered module output.\n\t */\n\tfromContainer() {\n\t\tthis.#createInfoBox();\n\n\t\tconst divs = this.#container.querySelectorAll(\"div[data-dashboard__module]\");\n\t\tfor (const div of divs) {\n\t\t\tconst moduleName = div.dataset[\"dashboard__module\"];\n/*\n\t\t\tconst moduleOptions = div.dataset[\"dashboard__options\"];\n\t\t\t// JSON parse options\n*/\n\t\t\tconst moduleOptions = {};\n\n\t\t\tconst moduleClass = defaultModules[moduleName];\n\t\t\tif (!moduleClass) {\n\t\t\t\tthrow new Error(`Dashboard: no class for module ${moduleName}`);\n\t\t\t}\n\n\t\t\tdiv.classList.add(\"dashboard__table\");\n\t\t\tdiv.replaceChildren(this.#createModule(moduleName, moduleClass, moduleOptions));\n\t\t}\n\t}\n\n\n\t/**\n\t * Creates dashboard modules from an array of module descriptors and appends\n\t * them to the container.\n\t *\n\t * @param {Array<string|{name: string, options?: Object}>} modules - Module descriptors. Each entry is either a module name string or an object with `name` and optional `options`.\n\t */\n\tfromArray(modules) {\n\t\tthis.#createInfoBox();\n\n\t\tconst newModules = document.createDocumentFragment();\n\n\t\tfor (const module of modules) {\n\t\t\tlet moduleName, moduleOptions;\n\n\t\t\tif (typeof module === \"string\") {\n\t\t\t\tmoduleName = module;\n\t\t\t\tmoduleOptions = {};\n\t\t\t} else {\n\t\t\t\t({ name: moduleName, options: moduleOptions = {} } = module);\n\t\t\t}\n\n\t\t\tconst moduleClass = defaultModules[moduleName];\n\t\t\tif (!moduleClass) {\n\t\t\t\tthrow new Error(`Dashboard: no class for module ${moduleName}`);\n\t\t\t}\n\n\t\t\tconst moduleContainer = document.createElement(\"div\");\n\t\t\tmoduleContainer.className = \"dashboard__table\";\n\t\t\tmoduleContainer.append(this.#createModule(moduleName, moduleClass, moduleOptions));\n\n\t\t\tnewModules.append(moduleContainer);\n\t\t}\n\n\t\tthis.#container.append(newModules);\n\t}\n\n\n\t/**\n\t * Fetches and parses the HTML template file for the configured locale.\n\t * Populates the internal template map keyed by `data-dashboard__module`.\n\t *\n\t * @returns {Promise<void>}\n\t */\n\tasync #loadTemplates() {\n\t\ttry {\n\t\t\tconst url =`templates.${encodeURIComponent(Config.templateLocale)}.html`;\n\n\t\t\tconsole.debug(`Dashboard: loading templates from \"${url}\"...`);\n\n\t\t\tconst response = await fetch(url);\n\t\t\tif (!response.ok) {\n\t\t\t\tthrow new Error(`HTTP ${response.status} ${response.statusText}`);\n\t\t\t}\n\n\t\t\tconst doc = new DOMParser().parseFromString(await response.text(), \"text/html\");\n\t\t\tconst templates = doc.querySelectorAll(\"template[data-dashboard__module]\");\n\n\t\t\tfor (const template of templates) {\n\t\t\t\tthis.#templates.set(template.dataset[\"dashboard__module\"], template);\n\t\t\t}\n\n\t\t\tconsole.debug(`Dashboard: loaded ${templates.length} templates`);\n\t\t}\n\t\tcatch (err) {\n\t\t\tthrow new Error(\"Dashboard: template load failed\", { cause: err });\n\t\t}\n\t}\n\n\n\t/**\n\t * Instantiates a single dashboard module and returns its DOM subtree.\n\t *\n\t * @param {string} name - The module name (used for template lookup).\n\t * @param {typeof DashboardModule} Module - The module class constructor.\n\t * @param {Object} options - Options forwarded to the module constructor.\n\t * @returns {DocumentFragment|null} The rendered module DOM, or `null` if no template exists.\n\t */\n\t#createModule(name, Module, options) {\n\t\tconst template = this.#templates.get(name);\n\n\t\tif (!template) {\n\t\t\tconsole.warn(`Dashboard: no template for module \"${name}\"`);\n\t\t}\n\n\t\tconst module = new Module(this.#router, { template, ...options });\n\t\tconst moduleContainer = module._setupContainer();\n\n\t\treturn moduleContainer;\n\t}\n\n\n\t/**\n\t * Creates the shared {@link InfoBox} instance (if not already provided)\n\t * and attaches a click handler to the container that shows the info box\n\t * for any clicked data row.\n\t */\n\t#createInfoBox() {\n\t\tif (!this.#infoBox) {\n\t\t\tconst infoBox_template = this.#templates.get(\"InfoBox\");\n\t\t\tif (!infoBox_template) {\n\t\t\t\tthrow new Error(\"Dashboard: no template for InfoBox\");\n\t\t\t}\n\n\t\t\tconst infoBox = new InfoBox(this.#container, infoBox_template);\n\t\t\tthis.#infoBox = infoBox;\n\n\t\t\tthis.#container.addEventListener(\"click\", (ev) => {\n\t\t\t\tconst target = ev.target.closest(\".data\");\n\t\t\t\tconst data = target?.[DataTableModule.DATA_KEY];\n\n\t\t\t\tif (data) {\n\t\t\t\t\tinfoBox.show(data);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n", "/**\n * @module ReconnectingWebSocket\n * @description WebSocket wrapper that automatically reconnects on connection\n * failures using exponential back-off with jitter. Implements the same interface\n * as the native {@link WebSocket} class while extending {@link EventTarget}.\n */\n\n/**\n * A WebSocket wrapper that automatically reconnects on connection failures\n * using exponential back-off with jitter. Implements the same interface as\n * the native {@link WebSocket} class while extending {@link EventTarget}.\n *\n * @extends EventTarget\n */\nclass ReconnectingWebSocket extends EventTarget {\n\tstatic CONNECTING = WebSocket.CONNECTING;\n\tstatic OPEN = WebSocket.OPEN;\n\tstatic CLOSING = WebSocket.CLOSING;\n\tstatic CLOSED = WebSocket.CLOSED;\n\n\t/** @type {number} Maximum number of consecutive reconnection attempts. */\n\tmaxReconnectAttempts = Infinity;\n\t/** @type {number} Initial reconnect delay in milliseconds. */\n\tbaseReconnectInterval = 1200;\n\t/** @type {number} Upper bound for the reconnect delay in milliseconds. */\n\tmaxReconnectInterval = 30000;\n\t/** @type {number} Exponential multiplier applied per retry. */\n\treconnectDecay = 1.3;\n\t/** @type {number} Random jitter factor (0\u20131) applied to the delay. */\n\tjitterFactor = 0.3;\n\t/** @type {number} Milliseconds before a pending connection attempt is aborted. */\n\tconnectionTimeout = 4000;\n\n\t#url;\n\t#protocols;\n\t#socket = null;\n\t#retryCount = 0;\n\t#forcedClose = false;\n\t#reconnectTimer = null;\n\t#connectionTimeoutTimer = null;\n\t#binaryType = \"blob\";\n\n\t#handlers = new Map();\n\n\t#onOnlineBound;\n\t#onOfflineBound;\n\n\t/**\n\t * Creates a new ReconnectingWebSocket and immediately begins connecting.\n\t *\n\t * @param {string} url - The WebSocket URL to connect to.\n\t * @param {string|string[]} [protocols=[]] - Sub-protocols to request.\n\t * @param {Object} [options={}] - Additional options.\n\t * @param {AbortSignal} [options.signal] - An AbortSignal that, when aborted, permanently closes the socket.\n\t */\n\tconstructor(url, protocols = [], options = {}) {\n\t\tsuper();\n\t\tthis.#url = url;\n\t\tthis.#protocols = protocols;\n\n\t\tconst { signal, ...config } = options;\n\t\tObject.assign(this, config);\n\n\t\tif (signal) {\n\t\t\tsignal.addEventListener(\"abort\", () => this.close(), { once: true });\n\t\t}\n\n\t\tthis.#onOnlineBound = () => this.#handleWindowOnline();\n\t\tthis.#onOfflineBound = () => {};\n\n\t\twindow.addEventListener(\"online\", this.#onOnlineBound);\n\t\twindow.addEventListener(\"offline\", this.#onOfflineBound);\n\n\t\tthis.#connect();\n\t}\n\n\t/**\n\t * The sub-protocol selected by the server, or an empty string.\n\t *\n\t * @returns {string}\n\t */\n\tget protocol() {\n\t\treturn this.#socket?.protocol || \"\";\n\t}\n\n\t/**\n\t * The current connection state, mirroring the WebSocket `readyState` constants.\n\t *\n\t * @returns {number}\n\t */\n\tget readyState() {\n\t\tif (this.#socket) {\n\t\t\treturn this.#socket.readyState;\n\t\t}\n\t\treturn this.#forcedClose ? ReconnectingWebSocket.CLOSED : ReconnectingWebSocket.CONNECTING;\n\t}\n\n\t/**\n\t * The WebSocket URL.\n\t *\n\t * @returns {string}\n\t */\n\tget url() {\n\t\treturn this.#url;\n\t}\n\n\t/**\n\t * The binary data type for received messages.\n\t *\n\t * @returns {BinaryType}\n\t */\n\tget binaryType() {\n\t\treturn this.#binaryType;\n\t}\n\n\t/**\n\t * Sets the binary data type and propagates it to the underlying socket.\n\t *\n\t * @param {BinaryType} value - The binary type (`\"blob\"` or `\"arraybuffer\"`).\n\t */\n\tset binaryType(value) {\n\t\tthis.#binaryType = value;\n\t\tif (this.#socket) {\n\t\t\tthis.#socket.binaryType = value;\n\t\t}\n\t}\n\n\tset onopen(cb) { this.#updateHandler(\"open\", cb); }\n\tget onopen() { return this.#handlers.get(\"open\") ?? null; }\n\n\tset onmessage(cb) { this.#updateHandler(\"message\", cb); }\n\tget onmessage() { return this.#handlers.get(\"message\") ?? null; }\n\n\tset onclose(cb) { this.#updateHandler(\"close\", cb); }\n\tget onclose() { return this.#handlers.get(\"close\") ?? null; }\n\n\tset onerror(cb) { this.#updateHandler(\"error\", cb); }\n\tget onerror() { return this.#handlers.get(\"error\") ?? null; }\n\n\t/**\n\t * Replaces an `on<event>` handler, removing the previous one if set.\n\t *\n\t * @param {string} type - The event type (e.g. `\"open\"`, `\"message\"`).\n\t * @param {Function|null} newHandler - The new handler function, or `null` to remove.\n\t */\n\t#updateHandler(type, newHandler) {\n\t\tconst currentHandler = this.#handlers.get(type);\n\t\tif (currentHandler) {\n\t\t\tthis.removeEventListener(type, currentHandler);\n\t\t}\n\t\tthis.#handlers.set(type, newHandler);\n\t\tif (typeof newHandler === \"function\") {\n\t\t\tthis.addEventListener(type, newHandler);\n\t\t}\n\t}\n\n\t/**\n\t * Sends data through the underlying WebSocket.\n\t *\n\t * @param {string|ArrayBuffer|Blob} data - The data to send.\n\t * @throws {DOMException} If the socket is not currently open.\n\t */\n\tsend(data) {\n\t\tif (this.#socket && this.#socket.readyState === ReconnectingWebSocket.OPEN) {\n\t\t\tthis.#socket.send(data);\n\t\t} else {\n\t\t\tthrow new DOMException(\"WebSocket is not open. Wait for 'open' event.\", \"InvalidStateError\");\n\t\t}\n\t}\n\n\t/**\n\t * Forces a reconnection by closing the current socket, resetting the\n\t * retry counter, and opening a fresh connection.\n\t *\n\t * @throws {DOMException} If the socket has been permanently closed.\n\t */\n\treconnect() {\n\t\tif (this.#forcedClose) {\n\t\t\tthrow new DOMException(\"Cannot reconnect a closed WebSocket.\", \"InvalidStateError\");\n\t\t}\n\n\t\tif (this.#socket) {\n\t\t\tthis.#removeSocketListeners(this.#socket);\n\t\t\tthis.#socket.close(1000, \"Manual Reconnect\");\n\t\t\tthis.#socket = null;\n\t\t}\n\n\t\tthis.#retryCount = 0;\n\t\tthis.#connect();\n\t}\n\n\t/**\n\t * Alias for {@link ReconnectingWebSocket#reconnect} retained for\n\t * backwards compatibility.\n\t */\n\t// compatibility with older ReconnectingWebSocket class\n\trefresh() {\n\t\tthis.reconnect();\n\t}\n\n\t/**\n\t * Permanently closes the WebSocket and prevents further reconnection\n\t * attempts.\n\t *\n\t * @param {number} [code=1000] - The WebSocket close code.\n\t * @param {string} [reason] - A human-readable close reason.\n\t */\n\tclose(code = 1000, reason) {\n\t\tthis.#forcedClose = true;\n\t\tthis.#clearInternalTimers();\n\n\t\tif (this.#socket) {\n\t\t\tthis.#removeSocketListeners(this.#socket);\n\t\t\tthis.#socket.close(code, reason);\n\t\t\tthis.#socket = null;\n\t\t}\n\n\t\twindow.removeEventListener(\"online\", this.#onOnlineBound);\n\t\twindow.removeEventListener(\"offline\", this.#onOfflineBound);\n\n\t\tthis.dispatchEvent(new CloseEvent(\"close\", { code, reason, wasClean: true }));\n\t}\n\n\t/**\n\t * Creates a new native WebSocket connection unless one is already pending\n\t * or the socket has been permanently closed.\n\t */\n\t#connect() {\n\t\tif (this.#forcedClose) return;\n\n\t\tif (!navigator.onLine) return;\n\n\t\tif (this.#socket && this.#socket.readyState === ReconnectingWebSocket.CONNECTING) return;\n\n\t\ttry {\n\t\t\tconst ws = new WebSocket(this.#url, this.#protocols);\n\t\t\tthis.#socket = ws;\n\t\t\tws.binaryType = this.#binaryType;\n\n\t\t\tws.onopen = (event) => this.#handleOpen(event);\n\t\t\tws.onclose = (event) => this.#handleClose(event);\n\t\t\tws.onmessage = (event) => this.#handleMessage(event);\n\t\t\tws.onerror = (event) => this.#handleError(event);\n\n\t\t\tthis.#connectionTimeoutTimer = setTimeout(() => {\n\t\t\t\tif (this.#socket === ws) {\n\t\t\t\t\tthis.#removeSocketListeners(ws);\n\t\t\t\t\tws.close();\n\t\t\t\t\tthis.#handleClose({\n\t\t\t\t\t\ttarget: ws,\n\t\t\t\t\t\tcode: 4008,\n\t\t\t\t\t\treason: \"Connection Timeout\",\n\t\t\t\t\t\twasClean: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, this.connectionTimeout);\n\n\t\t} catch (err) {\n\t\t\tif (err instanceof SyntaxError) {\n\t\t\t\tthis.close(1006, \"Fatal Syntax Error\");\n\t\t\t\tthis.dispatchEvent(new Event(\"error\"));\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.#handleConnectionFailure();\n\t\t}\n\t}\n\n\t/**\n\t * Called when the browser goes online; triggers an immediate reconnection\n\t * if one was pending or the socket is closed.\n\t */\n\t#handleWindowOnline() {\n\t\tif (this.#reconnectTimer) {\n\t\t\tclearTimeout(this.#reconnectTimer);\n\t\t\tthis.#reconnectTimer = null;\n\t\t\tthis.#retryCount = 0;\n\t\t\tthis.#connect();\n\t\t}\n\t\telse if (!this.#socket || this.#socket.readyState === ReconnectingWebSocket.CLOSED) {\n\t\t\tthis.#retryCount = 0;\n\t\t\tthis.#connect();\n\t\t}\n\t}\n\n\t/**\n\t * Handles the underlying WebSocket `open` event.\n\t *\n\t * @param {Event} event - The open event.\n\t */\n\t#handleOpen(event) {\n\t\tif (event.target !== this.#socket) return;\n\t\tclearTimeout(this.#connectionTimeoutTimer);\n\t\tthis.#retryCount = 0;\n\t\tthis.dispatchEvent(new Event(\"open\"));\n\t}\n\n\t/**\n\t * Handles the underlying WebSocket `message` event by re-dispatching it.\n\t *\n\t * @param {MessageEvent} event - The message event.\n\t */\n\t#handleMessage(event) {\n\t\tif (event.target !== this.#socket) return;\n\t\tthis.dispatchEvent(new MessageEvent(\"message\", {\n\t\t\tdata: event.data,\n\t\t\tlastEventId: event.lastEventId,\n\t\t\torigin: event.origin,\n\t\t\tports: event.ports,\n\t\t\tsource: event.source\n\t\t}));\n\t}\n\n\t/**\n\t * Handles the underlying WebSocket `close` event, dispatches it, and\n\t * schedules a reconnection unless the close was forced.\n\t *\n\t * @param {CloseEvent} event - The close event.\n\t */\n\t#handleClose(event) {\n\t\tif (event.target !== this.#socket) return;\n\t\tclearTimeout(this.#connectionTimeoutTimer);\n\t\tthis.#socket = null;\n\t\tthis.dispatchEvent(new CloseEvent(\"close\", {\n\t\t\tcode: event.code,\n\t\t\treason: event.reason,\n\t\t\twasClean: event.wasClean\n\t\t}));\n\t\tif (!this.#forcedClose) {\n\t\t\tthis.#handleConnectionFailure();\n\t\t}\n\t}\n\n\t/**\n\t * Handles the underlying WebSocket `error` event by re-dispatching it.\n\t *\n\t * @param {Event} event - The error event.\n\t */\n\t#handleError(event) {\n\t\tif (event.target !== this.#socket) return;\n\t\tthis.dispatchEvent(new Event(\"error\"));\n\t}\n\n\t/**\n\t * Schedules a reconnection attempt with exponential back-off and jitter.\n\t * Dispatches a `maxreconnects` event if the retry limit has been reached.\n\t */\n\t#handleConnectionFailure() {\n\t\tif (this.#retryCount >= this.maxReconnectAttempts) {\n\t\t\tthis.dispatchEvent(new Event(\"maxreconnects\"));\n\t\t\treturn;\n\t\t}\n\t\tlet delay = this.baseReconnectInterval * Math.pow(this.reconnectDecay, this.#retryCount);\n\t\tdelay = Math.min(delay, this.maxReconnectInterval);\n\t\tif (this.jitterFactor > 0) {\n\t\t\tconst variance = delay * this.jitterFactor;\n\t\t\tconst jitter = (Math.random() * variance * 2) - variance;\n\t\t\tdelay = Math.max(0, delay + jitter);\n\t\t}\n\t\tthis.#reconnectTimer = setTimeout(() => {\n\t\t\tthis.#retryCount++;\n\t\t\tthis.#connect();\n\t\t}, delay);\n\t}\n\n\t/**\n\t * Clears the reconnect and connection-timeout timers.\n\t */\n\t#clearInternalTimers() {\n\t\tif (this.#reconnectTimer) {\n\t\t\tclearTimeout(this.#reconnectTimer);\n\t\t\tthis.#reconnectTimer = null;\n\t\t}\n\t\tif (this.#connectionTimeoutTimer) {\n\t\t\tclearTimeout(this.#connectionTimeoutTimer);\n\t\t\tthis.#connectionTimeoutTimer = null;\n\t\t}\n\t}\n\n\t/**\n\t * Detaches all `on*` handlers from a native WebSocket instance.\n\t *\n\t * @param {WebSocket|null} ws - The WebSocket to clean up.\n\t */\n\t#removeSocketListeners(ws) {\n\t\tif (!ws) return;\n\t\tws.onopen = null;\n\t\tws.onclose = null;\n\t\tws.onmessage = null;\n\t\tws.onerror = null;\n\t}\n}\n\nexport { ReconnectingWebSocket };\n", "/**\n * @module activity_icon\n * @description Activity indicator classes that visually reflect the current\n * connection state (ok / idle / off / error). Subclasses update the page\n * favicon ({@link PageIconActivity}, {@link CachedPageIconActivity}) or CSS\n * classes ({@link CSSActivity}).\n */\n\n// TODO: rename everything\n\n\n// activity status\n// changes from ok to idle after idleTimeout, all other states use no timer\n\n/**\n * Base class for activity indicators. Tracks a state machine with four\n * states (`ok`, `idle`, `off`, `error`) and an optional idle timer that\n * transitions from `ok` to `idle` after a configurable timeout.\n */\nclass Activity {\n\tstatic _states = Object.freeze({\n\t\t_ok: Symbol(\"ok\"),\n\t\t_off: Symbol(\"off\"),\n\t\t_idle: Symbol(\"idle\"),\n\t\t_error: Symbol(\"error\")\n\t});\n\n\t#idleTimeout;\n\t#idleTimer = null;\n\t#lastState = Activity._states._off;\n\n\t_element;\n\n\t/**\n\t * Creates a new Activity indicator.\n\t *\n\t * @param {HTMLElement} element - The DOM element whose appearance reflects the activity state.\n\t * @param {number} [idleTimeout=0] - Milliseconds before the state automatically transitions from `ok` to `idle`. `0` disables the timer.\n\t */\n\tconstructor(element, idleTimeout = 0) {\n\t\tthis._element = element;\n\t\tthis.#idleTimeout = idleTimeout;\n\t}\n\n\t/**\n\t * Called when the activity state changes. Override in subclasses to apply\n\t * visual updates.\n\t *\n\t * @param {symbol} _newState - The new activity state symbol.\n\t * @param {symbol} _oldState - The previous activity state symbol.\n\t */\n\t_changeState(_newState, _oldState) {\n\t\t// base class does nothing here\n\t}\n\n\t/**\n\t * Internal state setter. Clears any pending idle timer, invokes\n\t * {@link Activity#_changeState} if the state actually changed, and\n\t * optionally starts a new idle timer.\n\t *\n\t * @param {symbol} state - The target state symbol.\n\t * @param {number} [timeout=0] - Milliseconds before automatically transitioning to idle.\n\t */\n\t// clears/sets timeouts with every update, should be cheap enough\n\t#set(state, timeout = 0) {\n\t\tif (this.#idleTimer) {\n\t\t\tclearTimeout(this.#idleTimer);\n\t\t\tthis.#idleTimer = null;\n\t\t}\n\n\t\tif (this.#lastState != state) {\n\t\t\t// console.log(`${this.#lastState.toString()} => ${state.toString()}`);\n\t\t\tthis._changeState(state, this.#lastState);\n\t\t\tthis.#lastState = state;\n\t\t}\n\n\t\tif (timeout) {\n\t\t\tthis.#idleTimer = setTimeout(this.idle, timeout);\n\t\t}\n\t}\n\n\t/** Transitions to the `ok` state and starts the idle timer. */\n\tok = () => this.#set(Activity._states._ok, this.#idleTimeout);\n\t/** Transitions to the `off` state. */\n\toff = () => this.#set(Activity._states._off, 0);\n\t/** Transitions to the `idle` state. */\n\tidle = () => this.#set(Activity._states._idle, 0);\n\t/** Transitions to the `error` state. */\n\terror = () => this.#set(Activity._states._error, 0);\n}\n\n\n/**\n * Activity indicator that updates the `href` attribute of a DOM element\n * (typically a `<link rel=\"icon\">`) to point at a state-specific SVG icon.\n *\n * @extends Activity\n */\n// changes the href attribute of an object, typically a <link rel=icon> element\n// the browser is likely to request the file each time the state changes (favicon handler)\n// TODO: same as IconActivity(attribute=\"href\")\nclass PageIconActivity extends Activity {\n\tstatic #icons = {\n\t\t[Activity._states._ok]: \"img/activity-icon/activity-icon--state-ok.svg\",\n\t\t[Activity._states._off]: \"img/activity-icon/activity-icon--state-off.svg\",\n\t\t[Activity._states._idle]: \"img/activity-icon/activity-icon--state-idle.svg\",\n\t\t[Activity._states._error]: \"img/activity-icon/activity-icon--state-error.svg\"\n\t};\n\n\t/**\n\t * Updates the element's `href` to the icon path for the new state.\n\t *\n\t * @param {symbol} newState - The new activity state symbol.\n\t * @param {symbol} _oldState - The previous activity state symbol.\n\t */\n\t_changeState(newState, _oldState) {\n\t\tthis._element.href = PageIconActivity.#icons[newState];\n\t}\n}\n\n\n/**\n * A {@link PageIconActivity} subclass that pre-loads all state icons into\n * `blob:` URLs so the browser does not re-fetch them on every state change.\n *\n * @extends PageIconActivity\n */\n// pre-loads icons into \"blob:\" URLs\nclass CachedPageIconActivity extends PageIconActivity {\n\tstatic #cache = new Map(); // state -> blob\n\tstatic #readyPromise = null;  // `await CachedPageIconActivity.ready`\n\n\t/**\n\t * Promise that resolves when all activity icons have been pre-loaded.\n\t *\n\t * @type {Promise<PromiseSettledResult[]>}\n\t */\n\tstatic get ready() { return this.#readyPromise ??= this.#preloadIcons(); }\n\n\n\t/**\n\t * Creates a new CachedPageIconActivity and kicks off icon pre-loading.\n\t *\n\t * @param {HTMLElement} element - The DOM element whose `href` reflects the activity state.\n\t * @param {number} idleTimeout - Milliseconds before automatically transitioning from `ok` to `idle`.\n\t */\n\tconstructor(element, idleTimeout) {\n\t\tsuper(element, idleTimeout);\n\n\t\t// start async fetches on first run\n\t\tvoid this.ready;\n\t}\n\n\t/**\n\t * Updates the element's `href` from the pre-loaded blob cache, falling\n\t * back to the parent class behaviour if the icon has not been cached.\n\t *\n\t * @param {symbol} newState - The new activity state symbol.\n\t * @param {symbol} oldState - The previous activity state symbol.\n\t */\n\t_changeState(newState, oldState) {\n\t\tif (CachedPageIconActivity.#cache.has(newState)) {\n\t\t\tthis._element.href = CachedPageIconActivity.#cache.get(newState);\n\t\t} else {\n\t\t\tconsole.debug(`CachedPageIconActivity: no cache for ${newState.toString()}`);\n\t\t\tsuper._changeState(newState, oldState);\n\t\t}\n\t}\n\n\t/**\n\t * Fetches all activity icon SVGs and stores them as `blob:` URLs.\n\t *\n\t * @returns {Promise<PromiseSettledResult[]>}\n\t */\n\tstatic async #preloadIcons() {\n\t\t// TODO: merge with PageIconActivity.#icons. use \"_icons\" instead of \"#\"?\n\t\tconst ICON_PATHS = {\n\t\t\t[Activity._states._ok]: \"img/activity-icon/activity-icon--state-ok.svg\",\n\t\t\t[Activity._states._off]: \"img/activity-icon/activity-icon--state-off.svg\",\n\t\t\t[Activity._states._idle]: \"img/activity-icon/activity-icon--state-idle.svg\",\n\t\t\t[Activity._states._error]: \"img/activity-icon/activity-icon--state-error.svg\"\n\t\t};\n\n\t\tconsole.debug(\"CachedPageIconActivity: loading activity icons...\");\n\t\tconst loadPromises = Object.getOwnPropertySymbols(ICON_PATHS).map(async (state) => {\n\t\t\tconst path = ICON_PATHS[state];\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(path);\n\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tthrow new Error(`HTTP ${response.status} ${response.statusText}`);\n\t\t\t\t}\n\n\t\t\t\t// TODO: check that response is SVG?\n\n\t\t\t\t// store response in blob storage, register blob: URL in map\n\t\t\t\tthis.#cache.set(state, URL.createObjectURL(await response.blob()));\n\t\t\t\tconsole.debug(`CachedPageIconActivity: cached icon: ${path} for state: ${state.toString()}`);\n\t\t\t} catch (err) {\n\t\t\t\tconsole.warn(`CachedPageIconActivity: failed to preload icon: ${path} for state: ${state.toString()}:`, err);\n\t\t\t}\n\t\t});\n\n\t\treturn Promise.allSettled(loadPromises);\n\t}\n}\n\n\n/**\n * Activity indicator that toggles CSS classes on the target element to\n * reflect the current state.\n *\n * @extends Activity\n */\n// adds/removes CSS classes\n\nclass CSSActivity extends Activity {\n\tstatic #classes = {\n\t\t[Activity._states._ok]: \"activity-icon--state-ok\",\n\t\t[Activity._states._off]: \"activity-icon--state-off\",\n\t\t[Activity._states._idle]: \"activity-icon--state-idle\",\n\t\t[Activity._states._error]: \"activity-icon--state-error\"\n\t};\n\n\t/**\n\t * Adds the CSS class for the new state and removes the class for the old\n\t * state from the target element.\n\t *\n\t * @param {symbol} newState - The new activity state symbol.\n\t * @param {symbol} oldState - The previous activity state symbol.\n\t */\n\t_changeState(newState, oldState) {\n\t\tthis._element.classList.add(CSSActivity.#classes[newState]);\n\t\tthis._element.classList.remove(CSSActivity.#classes[oldState]);\n\t}\n}\n\n\n/*\n\n// unused WIP based on Activity class\n\n// changes an object property\n\nclass AttributeActivity extends Activity {\n\tstatic #defaults = {\n\t\t[Activity._states._ok]: \"ok\",\n\t\t[Activity._states._off]: \"off\",\n\t\t[Activity._states._idle]: \"idle\",\n\t\t[Activity._states._error]: \"error\"\n\t};\n\n\t#attribute;\n\t#values;\n\n\t// TODO: due to property mangling, it's virtually impossible to provide an external values dict\n\tconstructor(element, idleTimeout = 0, attribute = \"textContent\", values = AttributeActivity.#defaults) {\n\t\tsuper(element, idleTimeout);\n\t\tthis.#attribute = attribute;\n\t\tthis.#values = values;\n\t}\n\n\t_changeState(newState, oldState) {\n\t\tthis._element[this.#attribute] = this.#values[newState];\n\t}\n}\n\n\nclass IconActivity extends AttributeActivity {\n\tstatic #icons = {\n\t\t[Activity._states._ok]: \"img/activity-icon/activity-icon--state-ok.svg\",\n\t\t[Activity._states._off]: \"img/activity-icon/activity-icon--state-off.svg\",\n\t\t[Activity._states._idle]: \"img/activity-icon/activity-icon--state-idle.svg\",\n\t\t[Activity._states._error]: \"img/activity-icon/activity-icon--state-error.svg\"\n\t};\n\n\tconstructor(element, idleTimeout = 0, attribute = \"src\", values = IconActivity.#icons) {\n\t\tsuper(element, idleTimeout, attribute, values);\n\t}\n}\n\n*/\n\n\nexport { CachedPageIconActivity, PageIconActivity, CSSActivity };\n", "/**\n * @module main\n * @description Application entry point. Initialises the EDDN WebSocket client,\n * wires up the activity icon, loads dashboard templates, creates dashboard\n * modules from the DOM, and starts the connection.\n */\n\nimport { Config } from \"#config.js\";\n\nimport { EDDNClient } from \"#eddn/EDDNClient.js\";\nimport { MessageRouter } from \"#eddn/MessageRouter.js\";\nimport { Dashboard } from \"#board/Dashboard.js\";\nimport { ReconnectingWebSocket } from \"#ws/ReconnectingWebSocket.js\";\nimport { CachedPageIconActivity } from \"#ui/activity_icon.js\";\n// import { RegionMap } from \"#ed/RegionMap.js\";\n\n\nconsole.debug(\"Main: start\");\n\n\n// The EDDN event bus\nconst eddn = new EDDNClient({\n\turl: Config.websocket_url,\n\tresetTimeout: Config.resetTimeout,\n\n\t// ReconnectingWebSocket handles transient connection errors\n\tWebSocketClass: ReconnectingWebSocket,\n\n\t// pass only a subset of messages to display modules\n\tfilter: Config.globalEventFilter,\n});\neddn.addEventListener(\"eddn:error\", (event) => console.error(`EDDN error: ${event.message} - ${event.error}`));\n\n\n// Reflect websocket activity in page icon\n// TODO: quick succession of changes on load can get the displayed icon stuck on \"idle\"\n//       - await ready before connect for now\nconst activity = new CachedPageIconActivity(window.icon, Config.idleTimeout);\neddn.addEventListener(\"open\", () => activity.idle());\neddn.addEventListener(\"close\", () => activity.off());\neddn.addEventListener(\"error\", () => activity.error());\neddn.addEventListener(\"eddn:message\", () => activity.ok()); // all valid messages passing the filter\neddn.addEventListener(\"eddn:error\", () => activity.error()); // parse errors\n\n\n// The module handler\nconst dashboard = new Dashboard(new MessageRouter(eddn), { container: document.querySelector(\".dashboard\") });\n\n\n// TODO: dynamic imports etc., progress bar, \"Loading...\" animation\n\n\n// block here until all loaded\n\n// wait for CSS to finish loading\nif (document.readyState === \"loading\") {\n\tawait new Promise((resolve) => window.addEventListener(\"load\", resolve, { once: true }));\n}\n\n//await RegionMap.ready;\nawait CachedPageIconActivity.ready;\n\n// TODO: would crash here if template load fails. catch and display error?\nawait dashboard.ready;\n\n//document.querySelector(\".dashboard__loader\")?.remove();\n\n\nconsole.debug(\"Main: load done\");\n\n\n// create modules from <div data-dashboard__module=\"...\">\ndashboard.fromContainer();\n\n// create modules from names array\n//dashboard.fromArray([\"FSDJump\", { name: \"EventLog\", options: { listLength: 100 }}]);\n\n//dashboard.container.classList.remove(\"dashboard__loading\");\n\n\neddn.connect();\n\n\nconsole.debug(\"Main: init done\");\n"],
  "mappings": "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",
  "names": ["language", "Config", "_numberFormat", "_relTimeFormat", "GalacticRegions_default", "X0", "Y0", "Z0", "MAP_SIZE", "MAP_SCALE", "rowIndex", "rleData", "isReady", "readyPromise", "MAP_URL", "response", "buffer", "offsetCount", "offsetByteSize", "view", "i", "err", "bitMask", "field", "bits", "shift", "RegionMap", "x", "_y", "z", "px", "pz", "start", "end", "remainingX", "runLength", "regionId", "GalacticRegions_default", "id64", "BoxelPos", "xs", "ys", "zs", "massClass", "xb", "yb", "zb", "y", "_id64", "SystemAddress", "BodyId", "boxelBits", "n2", "id", "c1", "c2", "c3", "EDDNEvent", "_EDDNEvent", "#receiveTimestamp", "#age", "#gotAge", "#eventType", "#eventName", "#gameType", "#isTaxi", "#isMulticrew", "#starSystem", "#starPos", "#gotStarPos", "#region", "type", "data", "RegionMap", "eventType", "RX_SCHEMAREF", "gameversion", "msg", "err", "EDDNClient", "#WebSocketClass", "#abortController", "#textDecoder", "#socket", "#lastEvent", "#watchdogTimer", "#filterFunction", "#protocol", "options", "url", "resetTimeout", "filter", "WebSocketClass", "signal", "#attachEventHandlers", "#stopWatchdog", "#handleMessage", "originalEvent", "rawData", "data", "err", "#handleEDDNMessage", "event", "$schemaRef", "header", "message", "EDDNEvent", "#handleOpen", "#watchdog", "#handleClose", "#handleError", "target", "ev", "nextWake", "MessageRouter", "#topics", "#wildcards", "source", "options", "signal", "event", "#dispatch", "callback", "topics", "topic", "tgroup", "invoke", "cb", "err", "InfoBox", "_InfoBox", "#container", "#template", "container", "template", "msg", "msgText", "infoBox", "actions", "button", "#copyToClipboard", "ev", "target", "action", "text", "element", "#triggerAnimation", "err", "className", "resolve", "DashboardModule", "router", "topics", "event", "_handleEvent", "_event", "DataTableModule", "_DataTableModule", "#renderQueue", "#renderScheduled", "_container", "_tableTemplate", "_rowTemplate", "_cellTemplate", "Config", "options", "listLength", "cullFactor", "template", "_setupTemplates", "_setupContainer", "table", "tbody", "_makeCell", "textContent", "element", "_makeRow", "_addRow", "row", "#trimQueue", "#render", "queue", "container", "dropCount", "fragment", "cells", "newRow", "cell", "invoke", "i", "hardLimit", "softLimit", "queueLength", "DummyTableModule", "cb", "err", "ApproachModule", "DataTableModule", "router", "options", "_handleEvent", "event", "_addRow", "ApproachModule_default", "CodexEntryModule", "DataTableModule", "router", "options", "_handleEvent", "event", "message", "_addRow", "trimPrefix", "formatCodexKey", "RX_SUB_CATEGORY", "RX_CODEX_NAME", "GalacticRegions_default", "RX_REGION_NAME", "str", "regex", "prefix", "CodexEntryModule_default", "EventLogModule", "DataTableModule", "router", "options", "_handleEvent", "event", "_addRow", "formatRelativeTime", "#idCell", "RX_SCHEMAREF_EDDN", "uploaderID", "idCell", "_makeCell", "hex2bar", "time_units", "diffMs", "diffSec", "diffAbs", "Config", "_relTimeFormat", "unit", "seconds", "value", "err", "hex_colors", "id", "len", "step", "stops", "i", "color", "bar", "EventLogModule_default", "defaultRowFactory", "children", "row", "defaultCellFactory", "textContent", "cell", "StatsRow", "#value", "_key", "#cell", "_row", "key", "value", "rowFactory", "cellFactory", "kcell", "vcell", "_value", "newValue", "StatsBox", "_stats", "_rows", "#statsbody", "#cellFactory", "#rowFactory", "tbody", "options", "values", "stat", "SortedStatsBox", "_sort", "idxOld", "idxNew", "rowRef", "i", "EventStatsModule", "DataTableModule", "_statsBox", "router", "options", "_setupContainer", "table", "SortedStatsBox", "_container", "_handleEvent", "event", "EventStatsModule_default", "FSDJumpModule", "DataTableModule", "router", "options", "_handleEvent", "event", "_addRow", "FSDJumpModule_default", "GameStatsModule", "DataTableModule", "_statsBox", "router", "options", "_setupContainer", "table", "StatsBox", "_container", "_handleEvent", "event", "Config", "GameStatsModule_default", "LocationModule", "DataTableModule", "router", "options", "_handleEvent", "event", "message", "_addRow", "LocationModule_default", "NavRouteModule", "DataTableModule", "router", "options", "_handleEvent", "event", "route", "dist", "longest", "cells", "distance3", "cur", "wp", "hop", "range", "cell", "_makeCell", "_addRow", "v0", "v1", "NavRouteModule_default", "NewBodiesModule", "DataTableModule", "router", "options", "_handleEvent", "event", "message", "_addRow", "NewBodiesModule_default", "NewStarsModule", "DataTableModule", "router", "options", "_handleEvent", "event", "message", "_addRow", "NewStarsModule_default", "SoftwareStatsModule", "DataTableModule", "_statsBox", "router", "options", "_setupContainer", "table", "StatsBox", "_container", "_handleEvent", "event", "header", "tag", "needsort", "tbody", "a", "b", "SoftwareStatsModule_default", "ScanModule", "DataTableModule", "router", "options", "_handleEvent", "event", "_addRow", "ScanModule_default", "UpdatesModule", "DataTableModule", "router", "options", "_handleEvent", "event", "message", "_addRow", "UpdatesModule_default", "VisitsModule", "DataTableModule", "router", "options", "_handleEvent", "event", "message", "faction", "_addRow", "Config", "_numberFormat", "VisitsModule_default", "defaultModules", "ApproachModule_default", "CodexEntryModule_default", "EventLogModule_default", "EventStatsModule_default", "FSDJumpModule_default", "GameStatsModule_default", "DummyTableModule", "LocationModule_default", "NavRouteModule_default", "NewBodiesModule_default", "NewStarsModule_default", "ScanModule_default", "SoftwareStatsModule_default", "UpdatesModule_default", "VisitsModule_default", "Dashboard", "#router", "#container", "#infoBox", "#templates", "#readyPromise", "#loadTemplates", "router", "options", "container", "infoBox", "newContainer", "#createInfoBox", "divs", "div", "moduleName", "moduleOptions", "moduleClass", "#createModule", "modules", "newModules", "module", "moduleContainer", "url", "Config", "response", "templates", "template", "err", "name", "Module", "_setupContainer", "infoBox_template", "InfoBox", "ev", "data", "DataTableModule", "ReconnectingWebSocket", "_ReconnectingWebSocket", "#url", "#protocols", "#socket", "#retryCount", "#forcedClose", "#reconnectTimer", "#connectionTimeoutTimer", "#binaryType", "#handlers", "#onOnlineBound", "#onOfflineBound", "url", "protocols", "options", "signal", "config", "#handleWindowOnline", "#connect", "value", "cb", "#updateHandler", "type", "newHandler", "currentHandler", "data", "#removeSocketListeners", "code", "reason", "#clearInternalTimers", "ws", "event", "#handleOpen", "#handleClose", "#handleMessage", "#handleError", "err", "#handleConnectionFailure", "delay", "variance", "jitter", "Activity", "_Activity", "_states", "_ok", "_off", "_idle", "_error", "#idleTimeout", "#idleTimer", "#lastState", "_element", "element", "idleTimeout", "_changeState", "_newState", "_oldState", "#set", "state", "timeout", "PageIconActivity", "_PageIconActivity", "#icons", "newState", "CachedPageIconActivity", "_CachedPageIconActivity", "#cache", "#readyPromise", "#preloadIcons", "oldState", "ICON_PATHS", "loadPromises", "path", "response", "err", "CSSActivity", "_CSSActivity", "#classes", "eddn", "EDDNClient", "Config", "ReconnectingWebSocket", "event", "activity", "CachedPageIconActivity", "dashboard", "Dashboard", "MessageRouter", "resolve"]
}
